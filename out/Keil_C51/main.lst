C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\out\Keil_C51\main.o
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.exe .\SRC\MAIN.C CODE PRINT(.\out\Keil_C51\main.lst) OMF2 TABS(2) OPTIMIZE(8
                    -,SPEED) SMALL ROM(LARGE) INCDIR(.\dependence;.\src) DEFINE(__UVISION_VERSION) OBJECT(.\out\Keil_C51\main.o)

line level    source

   1          /**
   2           * *********************************************
   3           * 
   4           * 8051 Ultrasonic Distance Measurement System
   5           * 
   6           * Encoding = GBK
   7           * 
   8           * Author:W0n9, SailorYan
   9           * 
  10           * *********************************************
  11          */
  12          
  13          #include "REG52.H"
  14          #include "intrins.h"
  15          // #include "lcd1602.h"
  16          
  17          typedef unsigned char uint8_t;
  18          typedef unsigned int uint16_t;
  19          typedef unsigned long uint32_t;
  20          
  21          typedef signed char int8_t;
  22          typedef signed int int16_t;
  23          typedef signed long int32_t;
  24          
  25          #define XTAL11M
  26          // #define XTAL12M
  27          
  28          #define EXT0_VECTOR 0  /* 0x03 external interrupt 0 */
  29          #define TIM0_VECTOR 1  /* 0x0b timer 0 */
  30          #define EXT1_VECTOR 2  /* 0x13 external interrupt 1 */
  31          #define TIM1_VECTOR 3  /* 0x1b timer 1 */
  32          #define UART0_VECTOR 4 /* 0x23 serial port 0 */
  33          
  34          // sbit RCK_STMM = P2 ^ 7;
  35          // sbit DIO_DS = P2 ^ 6;
  36          // sbit SCK_SHBit = P2 ^ 5;
  37          
  38          sbit Trig_Pin = P2 ^ 1;
  39          sbit Echo_Pin = P2 ^ 0;
  40          sbit Mode_1 = P1 ^ 1;
  41          sbit Mode_2 = P1 ^ 2;
  42          sbit Mode_3 = P1 ^ 3;
  43          
  44          sbit lcden = P3 ^ 4; //使能端:en=1,读取；en=下降沿，执行指令
  45          sbit lcdrs = P3 ^ 5; //数据/指令选择端：rs=1，为数据；rs=0，为指令。
  46          sbit lcdrw = P3 ^ 6; //读写控制端：rw=1,读；rw=0,写
  47          // int W1,W2,W3,W4,W5,W6,W7;
  48          
  49          /***********延时函数******************/
  50          void delayms(uint8_t time)
  51          {
  52   1          uint8_t i;
  53   1          for (; time > 0; time--)
  54   1          {
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 2   

  55   2              for (i = 0; i < 124; i++)
  56   2              {
  57   3                  ;
  58   3              }
  59   2          }
  60   1      }
  61          
  62          /*******************lcd写入指令子函数********************/
  63          void lcd_wcom(uint8_t com)
  64          {
  65   1          lcdrs = 0;  // rs=0,指令
  66   1          lcdrw = 0;  // rw=0,写入
  67   1          P0 = com;   // 把指令送入P0口
  68   1          delayms(5); //延时一小会 ，让1602准备接收数据--------代替忙检测函数
  69   1          lcden = 1;  //使能端 下降沿，把指令送入1602的8为数据口
  70   1          delayms(2);
  71   1          lcden = 0;
  72   1      }
  73          
  74          /************************lcd写入数据函数************************/
  75          void lcd_wdata(uint8_t dat)
  76          {
  77   1          lcdrs = 1;  // RS=1,数据
  78   1          lcdrw = 0;  // rw=0,写入
  79   1          P0 = dat;   // 把要显示的数据送入P0口
  80   1          delayms(5); //延时一小会 ，让1602准备接收数据--------代替忙检测函数
  81   1          lcden = 1;  //使能端 下降沿，把指令送入1602的8为数据口
  82   1          delayms(2);
  83   1          lcden = 0;
  84   1      }
  85          
  86          /******************LCD初始化子函数****************************/
  87          void lcd_init() //初始化，写入指令
  88          {
  89   1          lcdrw = 0; //rw=0,写
  90   1          lcden = 1;
  91   1          lcden = 0;      //下降沿，执行指令
  92   1          lcd_wcom(0x38); //写指令,8位数据，双列
  93   1          lcd_wcom(0x0c); //开启显示屏，关光标，光标不闪烁
  94   1          lcd_wcom(0x06); //显示地址递增，即写一个数据后，显示位置右移一位
  95   1          lcd_wcom(0x01); //清屏
  96   1      }
  97          
  98          /**********************LCD显示子函数****************************/
  99          //i设置字符位置，j是显示的数字
 100          void lcd_display(uint8_t i, uint8_t j)
 101          {
 102   1      
 103   1          lcd_wcom(0x80 + i - 1);
 104   1          switch (j)
 105   1          {
 106   2          case 0:
 107   2              lcd_wdata('0');
 108   2              delayms(2);
 109   2              break;
 110   2          case 1:
 111   2              lcd_wdata('1');
 112   2              delayms(2);
 113   2              break;
 114   2          case 2:
 115   2              lcd_wdata('2');
 116   2              delayms(2);
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 3   

 117   2              break;
 118   2          case 3:
 119   2              lcd_wdata('3');
 120   2              delayms(2);
 121   2              break;
 122   2          case 4:
 123   2              lcd_wdata('4');
 124   2              delayms(2);
 125   2              break;
 126   2          case 5:
 127   2              lcd_wdata('5');
 128   2              delayms(2);
 129   2              break;
 130   2          case 6:
 131   2              lcd_wdata('6');
 132   2              delayms(2);
 133   2              break;
 134   2          case 7:
 135   2              lcd_wdata('7');
 136   2              delayms(2);
 137   2              break;
 138   2          case 8:
 139   2              lcd_wdata('8');
 140   2              delayms(2);
 141   2              break;
 142   2          case 9:
 143   2              lcd_wdata('9');
 144   2              delayms(2);
 145   2              break;
 146   2          default:
 147   2              lcd_wdata('.');
 148   2              delayms(2);
 149   2              break;
 150   2          }
 151   1      }
 152          /*********************最终显示函数*************************************/
 153          //abc分别为百十个位，使用前需lcd_init()初始化
 154          void fin_display(uint8_t a, b, c)
 155          {
 156   1          lcd_wcom(0x80 + 7 - 1);
 157   1          lcd_wdata('M');
 158   1          delayms(2);
 159   1      
 160   1          lcd_wcom(0x80 + 6 - 1);
 161   1          lcd_wdata('C');
 162   1          delayms(2);
 163   1      
 164   1          lcd_display(5, 5);
 165   1          lcd_display(4, '.');
 166   1          lcd_display(3, c);
 167   1          lcd_display(2, b);
 168   1          lcd_display(1, a);
 169   1      }
 170          /**************************主函数*******************************/
 171          // void main()
 172          // {
 173          //  lcd_init();//初始化
 174          //  while(1)
 175          //     {
 176          //  //lcd_display(10,W1);
 177          //  //lcd_display(9,':');
 178          //  // lcd_display(8,1);
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 4   

 179          //  // lcd_display(7,W3);
 180          //    // lcd_display(6,':');
 181          //    // lcd_display(5,W4);
 182          //    // lcd_display(4,W5);
 183          //    lcd_display(10,3);
 184          //  lcd_display(2,2);
 185          //     lcd_display(1,1);
 186          //  }
 187          // }
 188          
 189          void UART_init() //非同步鬏
 190          {
 191   1          SCON = 0x52; //串列控制捍嫫01010010 TI=1 REN=1 01 8位元UART鬏(8-11)
 192   1          TMOD = 0x20; //r的Ｊ捍嫫 00100000    O定定r器1楣ぷ鞣绞2
 193   1          TCON = 0x69; //r悼刂捍嫫 01101001
 194   1          TH1 = 0xFD;  //r捍嫫  <230> U率1200
 195   1          TR1 = 1;     //r悼刂捍嫫餮e面的TR1  //O置波特率 9600bps
 196   1          ES = 1;      //串列中嘀履
 197   1          EA = 1;      //全部中嘣粗履
 198   1      }
 199          
 200          void UARTSnd(uint8_t dat)
 201          {
 202   1      
 203   1          TI = 0;     // clear transmit interrupt flag
 204   1          SBUF = dat; // start sending one byte
 205   1          while (!TI)
 206   1              ; // wait until sent
 207   1      }
 208          
 209          // void Delay10us() //@11.0592MHz
 210          // {
 211          //     uint8_t tempi;
 212          
 213          //     _nop_();
 214          //     tempi = 25;
 215          //     while (--tempi)
 216          //         ;
 217          // }
 218          
 219          // void Timer0Init(void) //10毫秒@11.0592MHz
 220          // {
 221          //     // AUXR &= 0x7F; //定时器时钟12T模式
 222          //     TMOD &= 0xF0; //设置定时器0模式
 223          //     TL0 = 0x00;   //设置定时初值
 224          //     TH0 = 0xDC;   //设置定时初值
 225          //     TF0 = 0;      //清除TF0标志
 226          //     TR0 = 1;      //定时器0开始计时
 227          // }
 228          
 229          #ifdef XTAL11M
 230          uint32_t MeterByTrig()
 231          {
 232   1          uint8_t tempi;
 233   1          uint32_t PresentTime;
 234   1      
 235   1          //Timer Init
 236   1          TMOD &= 0xF1;
 237   1          // TAMOD = 0X00;
 238   1          // TCON = 0X00;
 239   1          TH0 = 0;
 240   1          TL0 = 0;
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 5   

 241   1      
 242   1          // Module Start
 243   1          Trig_Pin = 0;
 244   1          Trig_Pin = 1;
 245   1          _nop_();
 246   1          tempi = 25;
 247   1          while (--tempi)
 248   1              ;
 249   1          Trig_Pin = 0;
 250   1      
 251   1          while (!Echo_Pin)
 252   1              ;
 253   1          TR0 = 1;
 254   1          while (Echo_Pin)
 255   1              ;
 256   1          TR0 = 0;
 257   1      
 258   1          PresentTime = TH0;
 259   1          PresentTime <<= 8; // Equal TH0 * 256
 260   1          PresentTime += TL0;
 261   1          //921600 Cycles @11.0592MHz
 262   1          // PresentTime /= 921.6;
 263   1          // PresentTime /= 922;
 264   1          // PresentTime *= 17;
 265   1          PresentTime = PresentTime * 0.0184;
 266   1          // PresentTime = (uint32_t)(PresentTime * 0.0023);
 267   1      
 268   1          // delayms(5);
 269   1          return PresentTime;
 270   1      }
 271          #endif
 272          
 273          #ifdef XTAL12M
              uint32_t MeterByTrig()
              {
                  uint8_t tempa;
                  uint8_t IsOverFlow;
                  uint32_t PresentTime;
                  IsOverFlow = 0;
              
                  //Delay1Ms();
              
                  // P1M1 &= 0X7F;
                  // P1M2 &= 0X7F;
              
                  // P1M1 |= 0X40;
                  // P1M2 &= 0XBF;
              
                  //Timer Init
                  TMOD &= 0xF5;
                  // TAMOD = 0X00;
                  TCON = 0X00;
                  TH1 = 0;
                  TL1 = 0;
              
                  Trig_Pin = 0;
                  for (tempa = 0; tempa < 10; tempa++) //up for 10us
                  {
                      Trig_Pin = 1;
                  }
                  Trig_Pin = 0;
              
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 6   

                  while (1)
                  {
                      if (Echo_Pin == 1)
                      {            //Start Timer;
                          TR0 = 1; //start timer
                          break;
                      }
                      if (TF0 == 1)
                      {
                          IsOverFlow = 1;
                          break; //overflow;
                      }
                  }
              
                  while (1)
                  {
                      if (Echo_Pin == 0)
                      { //Stop Timer;
                          TR0 = 0;
                          break;
                      }
                      if (TF0 == 1)
                      {
                          IsOverFlow = 1;
                          break; //overflow;
                      }
                  }
              
                  //  uint32_t PresentTime, tempb;
                  PresentTime = TH1;
                  PresentTime <<= 0X08;
                  PresentTime += TL1;
                  //1000000 Cycles @12MHz
                  PresentTime /= 1000;
                  PresentTime *= 17;
              
                  // tempb = PresentTime / 137;
                  // PresentTime /= 7; //*3
              
                  // PresentTime -= tempb; //time, us
              
                  // tempb = PresentTime / 150;
                  // PresentTime /= 3;
                  // PresentTime += tempb;
                  //Delay1Ms();
                  return PresentTime;
              }
              #endif
 351          
 352          void DisplayLength(uint32_t number)
 353          {
 354   1          uint8_t Hundred, Decade, Unit;
 355   1          if (number > 999)
 356   1              number = 0;
 357   1          // Thousand = number / 1000;
 358   1      
 359   1          // number = number % 1000;
 360   1          Hundred = number / 100;
 361   1      
 362   1          number = number % 100;
 363   1          Decade = number / 10;
 364   1      
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 7   

 365   1          Unit = number % 10;
 366   1      
 367   1          fin_display(Hundred, Decade, Unit);
 368   1          // DisplayLED(1, Thousand, 0);
 369   1          // DisplayLED(2, Hundred, 0);
 370   1          // DisplayLED(3, Decade, 0);
 371   1          // DisplayLED(4, Unit, 0);
 372   1      }
 373          
 374          // void DisplayLED(uint8_t LEDid, uint8_t Value, uint8_t Isdot)
 375          // {
 376          //     uint8_t tempa, tempb;
 377          //     uint8_t tempc, tempd;
 378          //     const uint8_t NumValue[11] = {0X40, 0X79, 0X24, 0X30, 0X19, 0X12, 0X02, 0X78, 0X00, 0X10, 0X3F}; //
             -0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -.
 379          
 380          //     tempa = 1;
 381          //     tempa <<= (LEDid - 1);
 382          //     if (Value >= 11) //value should little than 10
 383          //         Value = 0;
 384          //     tempb = NumValue[Value];
 385          //     if (Isdot == 0)
 386          //         tempb += 0X80;
 387          
 388          //     //begin output
 389          //     tempd = 0X80;
 390          //     for (tempc = 0; tempc < 8; tempc++)
 391          //     {
 392          //         SCK_SHBit = 0;
 393          //         SCK_SHBit = 0;
 394          //         DIO_DS = (tempa & tempd);
 395          //         SCK_SHBit = 1;
 396          //         SCK_SHBit = 1;
 397          //         tempd >>= 1;
 398          //     }
 399          
 400          //     tempd = 0X80;
 401          //     for (tempc = 0; tempc < 8; tempc++)
 402          //     {
 403          //         SCK_SHBit = 0;
 404          //         SCK_SHBit = 0;
 405          //         DIO_DS = (tempb & tempd);
 406          //         SCK_SHBit = 1;
 407          //         SCK_SHBit = 1;
 408          //         tempd >>= 1;
 409          //     }
 410          
 411          //     RCK_STMM = 0;
 412          //     RCK_STMM = 0;
 413          //     RCK_STMM = 0;
 414          //     RCK_STMM = 0;
 415          //     RCK_STMM = 1;
 416          //     RCK_STMM = 1;
 417          //     RCK_STMM = 1;
 418          //     RCK_STMM = 1;
 419          //     //Delay1Ms();
 420          // }
 421          
 422          void Delay20ms() //@11.0592MHz
 423          {
 424   1          uint8_t i, j;
 425   1      
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 8   

 426   1          i = 36;
 427   1          j = 217;
 428   1          do
 429   1          {
 430   2              while (--j)
 431   2                  ;
 432   2          } while (--i);
 433   1      }
 434          
 435          void Delay5s() //@11.0592MHz
 436          {
 437   1          uint8_t i, j, k;
 438   1      
 439   1          _nop_();
 440   1          i = 36;
 441   1          j = 5;
 442   1          k = 211;
 443   1          do
 444   1          {
 445   2              do
 446   2              {
 447   3                  while (--k)
 448   3                      ;
 449   3              } while (--j);
 450   2          } while (--i);
 451   1      }
 452          
 453          void Delay1s() //@11.0592MHz
 454          {
 455   1          uint8_t i, j, k;
 456   1      
 457   1          _nop_();
 458   1          i = 11;
 459   1          j = 130;
 460   1          k = 111;
 461   1          do
 462   1          {
 463   2              do
 464   2              {
 465   3                  while (--k)
 466   3                      ;
 467   3              } while (--j);
 468   2          } while (--i);
 469   1      }
 470          
 471          // void greater_than_2m()
 472          // {
 473          //     uint8_t tempj;
 474          //     uint8_t greater_than_2m[] = {0xFD, 0x00, 0x11, 0x01, 0x01, 0x73, 0x6F, 0x75, 0x6E, 0x64, 0x6B, 0xB4
             -, 0xF3, 0xD3, 0xDA, 0xC1, 0xBD, 0xC3, 0xD7, 0xC2};
 475          //     Delay20ms();
 476          //     for (tempj = 0; tempj < 20; tempj++)
 477          //     {
 478          //         UARTSnd(greater_than_2m[tempj]);
 479          //     }
 480          // }
 481          
 482          void greater_than_1m()
 483          {
 484   1          uint8_t tempj;
 485   1          uint8_t greater_than_1m[] = {0xFD, 0x00, 0x11, 0x01, 0x01, 0x73, 0x6F, 0x75, 0x6E, 0x64, 0x6B, 0xB4, 0
             -xF3, 0xD3, 0xDA, 0xD2, 0xBB, 0xC3, 0xD7, 0xD7};
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 9   

 486   1          Delay20ms();
 487   1          for (tempj = 0; tempj < 20; tempj++)
 488   1          {
 489   2              UARTSnd(greater_than_1m[tempj]);
 490   2          }
 491   1          Delay5s();
 492   1      }
 493          
 494          void less_than_1m()
 495          {
 496   1          uint8_t tempj;
 497   1          uint8_t less_than_1m[] = {0xFD, 0x00, 0x0B, 0x01, 0x01, 0xD0, 0xA1, 0xD3, 0xDA, 0xD2, 0xBB, 0xC3, 0xD7
             -, 0xF3};
 498   1          Delay20ms();
 499   1          for (tempj = 0; tempj < 14; tempj++)
 500   1          {
 501   2              UARTSnd(less_than_1m[tempj]);
 502   2          }
 503   1          Delay1s();
 504   1      }
 505          
 506          void main()
 507          {
 508   1          // uint8_t tempa;
 509   1          uint32_t PreLength; //  Unit is cm
 510   1          uint8_t i;
 511   1          uint8_t tempj;
 512   1          uint8_t greater_than_2m[] = {0xFD, 0x00, 0x11, 0x01, 0x01, 0x73, 0x6F, 0x75, 0x6E, 0x64, 0x6B, 0xB4, 0
             -xF3, 0xD3, 0xDA, 0xC1, 0xBD, 0xC3, 0xD7, 0xC2};
 513   1          // uint8_t debug;
 514   1          lcd_init();
 515   1          UART_init();
 516   1      
 517   1          // for (i = 0; i < 1; i++)
 518   1          // { // greater_than_2m();
 519   1      
 520   1          //     Delay20ms();
 521   1          //     for (tempj = 0; tempj < 20; tempj++)
 522   1          //     {
 523   1          //         UARTSnd(greater_than_2m[tempj]);
 524   1          //     }
 525   1          // }
 526   1      
 527   1          // // greater_than_2m();
 528   1          // Delay5s();
 529   1          // for (i = 0; i < 3; i++)
 530   1          // {
 531   1          //     greater_than_1m();
 532   1          // }
 533   1          // // Delay5s();
 534   1          // for (i = 0; i < 3; i++)
 535   1          // {
 536   1          //     less_than_1m();
 537   1          // }
 538   1      
 539   1          while (1)
 540   1          {
 541   2              PreLength = MeterByTrig();
 542   2              DisplayLength(PreLength);
 543   2              // if (PreLength > 200)
 544   2              // {
 545   2              //     for (i = 0; i < 1; i++)
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 10  

 546   2              //     { // greater_than_2m();
 547   2              //         Delay20ms();
 548   2              //         for (tempj = 0; tempj < 20; tempj++)
 549   2              //         {
 550   2              //             UARTSnd(greater_than_2m[tempj]);
 551   2              //         }
 552   2              //     }
 553   2              // }
 554   2              // else if (PreLength <= 200 && PreLength >= 100)
 555   2              // {
 556   2              //     for (i = 0; i < 3; i++)
 557   2              //     {
 558   2              //         greater_than_1m();
 559   2              //     }
 560   2              // }
 561   2              // else if (PreLength <= 100)
 562   2              // {
 563   2              //     for (i = 0; i < 3; i++)
 564   2              //     {
 565   2              //         less_than_1m();
 566   2              //     }
 567   2              // }
 568   2              if (!Mode_1)
 569   2              {
 570   3                  if (PreLength > 200)
 571   3                  {
 572   4                      for (i = 0; i < 1; i++)
 573   4                      { // greater_than_2m();
 574   5                          Delay20ms();
 575   5                          for (tempj = 0; tempj < 20; tempj++)
 576   5                          {
 577   6                              UARTSnd(greater_than_2m[tempj]);
 578   6                          }
 579   5                      }
 580   4                      Delay5s();
 581   4                  }
 582   3              }
 583   2              else if (!Mode_2)
 584   2              {
 585   3                  if (PreLength <= 200 && PreLength >= 100)
 586   3                  {
 587   4                      greater_than_1m();
 588   4                  }
 589   3              }
 590   2              else if (!Mode_3)
 591   2              {
 592   3                  if (PreLength <= 100)
 593   3                  {
 594   4                      less_than_1m();
 595   4                  }
 596   3              }
 597   2      
 598   2              // debug = PreLength / 1000;
 599   2              // UARTSnd(PreLength);
 600   2              // Delay5s();
 601   2      
 602   2              // for (tempa = 0; tempa < 200; tempa++)   //  refresh for 200 cycles
 603   2              // {
 604   2              //     DisplayLength(PreLength);
 605   2              // }
 606   2          }
 607   1      }
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 11  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION L?0099 (BEGIN)
0000 C2B6              CLR     lcdrw
0002 8F80              MOV     P0,R7
0004 7F05              MOV     R7,#05H
0006 120000      R     LCALL   _delayms
0009 D2B4              SETB    lcden
000B 7F02              MOV     R7,#02H
             ; FUNCTION _delayms (BEGIN)
                                           ; SOURCE LINE # 50
;---- Variable 'time' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 51
                                           ; SOURCE LINE # 53
000D         ?C0001:
000D EF                MOV     A,R7
000E D3                SETB    C
000F 9400              SUBB    A,#00H
0011 7480              MOV     A,#080H
0013 9480              SUBB    A,#080H
0015 4012              JC      ?C0007
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 55
;---- Variable 'i' assigned to Register 'R6' ----
0017 E4                CLR     A
0018 FE                MOV     R6,A
0019         ?C0004:
0019 EE                MOV     A,R6
001A C3                CLR     C
001B 947C              SUBB    A,#07CH
001D 7480              MOV     A,#080H
001F 9480              SUBB    A,#080H
0021 5003              JNC     ?C0003
                                           ; SOURCE LINE # 56
                                           ; SOURCE LINE # 58
0023 0E                INC     R6
0024 80F3              SJMP    ?C0004
                                           ; SOURCE LINE # 59
0026         ?C0003:
0026 1F                DEC     R7
0027 80E4              SJMP    ?C0001
                                           ; SOURCE LINE # 60
0029         ?C0007:
0029 22                RET     
             ; FUNCTION _delayms (END)

             ; FUNCTION _lcd_wcom (BEGIN)
                                           ; SOURCE LINE # 63
;---- Variable 'com' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 64
                                           ; SOURCE LINE # 65
0000 C2B5              CLR     lcdrs
                                           ; SOURCE LINE # 66
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 68
                                           ; SOURCE LINE # 69
                                           ; SOURCE LINE # 70
0002 120000      R     LCALL   L?0099
                                           ; SOURCE LINE # 71
0005 C2B4              CLR     lcden
                                           ; SOURCE LINE # 72
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 12  

0007 22                RET     
             ; FUNCTION _lcd_wcom (END)

             ; FUNCTION _lcd_wdata (BEGIN)
                                           ; SOURCE LINE # 75
;---- Variable 'dat' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
0000 D2B5              SETB    lcdrs
                                           ; SOURCE LINE # 78
                                           ; SOURCE LINE # 79
                                           ; SOURCE LINE # 80
                                           ; SOURCE LINE # 81
                                           ; SOURCE LINE # 82
0002 120000      R     LCALL   L?0099
                                           ; SOURCE LINE # 83
0005 C2B4              CLR     lcden
                                           ; SOURCE LINE # 84
0007 22                RET     
             ; FUNCTION _lcd_wdata (END)

             ; FUNCTION lcd_init (BEGIN)
                                           ; SOURCE LINE # 87
                                           ; SOURCE LINE # 88
                                           ; SOURCE LINE # 89
0000 C2B6              CLR     lcdrw
                                           ; SOURCE LINE # 90
0002 D2B4              SETB    lcden
                                           ; SOURCE LINE # 91
0004 C2B4              CLR     lcden
                                           ; SOURCE LINE # 92
0006 7F38              MOV     R7,#038H
0008 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 93
000B 7F0C              MOV     R7,#0CH
000D 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 94
0010 7F06              MOV     R7,#06H
0012 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 95
0015 7F01              MOV     R7,#01H
0017 020000      R     LJMP    _lcd_wcom
             ; FUNCTION lcd_init (END)

             ; FUNCTION _lcd_display (BEGIN)
                                           ; SOURCE LINE # 100
;---- Variable 'j' assigned to Register 'R5' ----
;---- Variable 'i' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 101
                                           ; SOURCE LINE # 103
0000 EF                MOV     A,R7
0001 247F              ADD     A,#07FH
0003 FF                MOV     R7,A
0004 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 104
0007 ED                MOV     A,R5
0008 B40A00            CJNE    A,#0AH,?C0087
000B         ?C0087:
000B 504D              JNC     ?C0022
000D 900000      R     MOV     DPTR,#?C0088
0010 F8                MOV     R0,A
0011 28                ADD     A,R0
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 13  

0012 28                ADD     A,R0
0013 73                JMP     @A+DPTR
0014         ?C0088:
0014 020000      R     LJMP    ?C0012
0017 020000      R     LJMP    ?C0013
001A 020000      R     LJMP    ?C0014
001D 020000      R     LJMP    ?C0015
0020 020000      R     LJMP    ?C0016
0023 020000      R     LJMP    ?C0017
0026 020000      R     LJMP    ?C0018
0029 020000      R     LJMP    ?C0019
002C 020000      R     LJMP    ?C0020
002F 020000      R     LJMP    ?C0021
                                           ; SOURCE LINE # 105
                                           ; SOURCE LINE # 106
0032         ?C0012:
                                           ; SOURCE LINE # 107
0032 7F30              MOV     R7,#030H
                                           ; SOURCE LINE # 108
                                           ; SOURCE LINE # 109
0034 8026              SJMP    ?C0098
                                           ; SOURCE LINE # 110
0036         ?C0013:
                                           ; SOURCE LINE # 111
0036 7F31              MOV     R7,#031H
0038         ?C0089:
                                           ; SOURCE LINE # 112
                                           ; SOURCE LINE # 113
0038 8022              SJMP    ?C0098
                                           ; SOURCE LINE # 114
003A         ?C0014:
                                           ; SOURCE LINE # 115
003A 7F32              MOV     R7,#032H
003C         ?C0090:
                                           ; SOURCE LINE # 116
                                           ; SOURCE LINE # 117
003C 801E              SJMP    ?C0098
                                           ; SOURCE LINE # 118
003E         ?C0015:
                                           ; SOURCE LINE # 119
003E 7F33              MOV     R7,#033H
0040         ?C0091:
                                           ; SOURCE LINE # 120
                                           ; SOURCE LINE # 121
0040 801A              SJMP    ?C0098
                                           ; SOURCE LINE # 122
0042         ?C0016:
                                           ; SOURCE LINE # 123
0042 7F34              MOV     R7,#034H
0044         ?C0092:
                                           ; SOURCE LINE # 124
                                           ; SOURCE LINE # 125
0044 8016              SJMP    ?C0098
                                           ; SOURCE LINE # 126
0046         ?C0017:
                                           ; SOURCE LINE # 127
0046 7F35              MOV     R7,#035H
0048         ?C0093:
                                           ; SOURCE LINE # 128
                                           ; SOURCE LINE # 129
0048 8012              SJMP    ?C0098
                                           ; SOURCE LINE # 130
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 14  

004A         ?C0018:
                                           ; SOURCE LINE # 131
004A 7F36              MOV     R7,#036H
004C         ?C0094:
                                           ; SOURCE LINE # 132
                                           ; SOURCE LINE # 133
004C 800E              SJMP    ?C0098
                                           ; SOURCE LINE # 134
004E         ?C0019:
                                           ; SOURCE LINE # 135
004E 7F37              MOV     R7,#037H
0050         ?C0095:
                                           ; SOURCE LINE # 136
                                           ; SOURCE LINE # 137
0050 800A              SJMP    ?C0098
                                           ; SOURCE LINE # 138
0052         ?C0020:
                                           ; SOURCE LINE # 139
0052 7F38              MOV     R7,#038H
0054         ?C0096:
                                           ; SOURCE LINE # 140
                                           ; SOURCE LINE # 141
0054 8006              SJMP    ?C0098
                                           ; SOURCE LINE # 142
0056         ?C0021:
                                           ; SOURCE LINE # 143
0056 7F39              MOV     R7,#039H
0058         ?C0097:
                                           ; SOURCE LINE # 144
                                           ; SOURCE LINE # 145
0058 8002              SJMP    ?C0098
                                           ; SOURCE LINE # 146
005A         ?C0022:
                                           ; SOURCE LINE # 147
005A 7F2E              MOV     R7,#02EH
005C         ?C0098:
005C 120000      R     LCALL   _lcd_wdata
                                           ; SOURCE LINE # 148
005F 7F02              MOV     R7,#02H
0061 120000      R     LCALL   _delayms
                                           ; SOURCE LINE # 149
                                           ; SOURCE LINE # 150
                                           ; SOURCE LINE # 151
0064         ?C0023:
0064 22                RET     
             ; FUNCTION _lcd_display (END)

             ; FUNCTION _fin_display (BEGIN)
                                           ; SOURCE LINE # 154
0000 8C00        R     MOV     b,R4
0002 8D00        R     MOV     b+01H,R5
;---- Variable 'a' assigned to Register 'R1' ----
0004 A907              MOV     R1,AR7
;---- Variable 'c' assigned to Register 'R2/R3' ----
                                           ; SOURCE LINE # 155
                                           ; SOURCE LINE # 156
0006 7F86              MOV     R7,#086H
0008 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 157
000B 7F4D              MOV     R7,#04DH
000D 120000      R     LCALL   _lcd_wdata
                                           ; SOURCE LINE # 158
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 15  

0010 7F02              MOV     R7,#02H
0012 120000      R     LCALL   _delayms
                                           ; SOURCE LINE # 160
0015 7F85              MOV     R7,#085H
0017 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 161
001A 7F43              MOV     R7,#043H
001C 120000      R     LCALL   _lcd_wdata
                                           ; SOURCE LINE # 162
001F 7F02              MOV     R7,#02H
0021 120000      R     LCALL   _delayms
                                           ; SOURCE LINE # 164
0024 7D05              MOV     R5,#05H
0026 7F05              MOV     R7,#05H
0028 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 165
002B 7D2E              MOV     R5,#02EH
002D 7F04              MOV     R7,#04H
002F 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 166
0032 AD03              MOV     R5,AR3
0034 7F03              MOV     R7,#03H
0036 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 167
0039 AD00        R     MOV     R5,b+01H
003B 7F02              MOV     R7,#02H
003D 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 168
0040 AD01              MOV     R5,AR1
0042 7F01              MOV     R7,#01H
0044 020000      R     LJMP    _lcd_display
             ; FUNCTION _fin_display (END)

             ; FUNCTION UART_init (BEGIN)
                                           ; SOURCE LINE # 189
                                           ; SOURCE LINE # 190
                                           ; SOURCE LINE # 191
0000 759852            MOV     SCON,#052H
                                           ; SOURCE LINE # 192
0003 758920            MOV     TMOD,#020H
                                           ; SOURCE LINE # 193
0006 758869            MOV     TCON,#069H
                                           ; SOURCE LINE # 194
0009 758DFD            MOV     TH1,#0FDH
                                           ; SOURCE LINE # 195
000C D28E              SETB    TR1
                                           ; SOURCE LINE # 196
000E D2AC              SETB    ES
                                           ; SOURCE LINE # 197
0010 D2AF              SETB    EA
                                           ; SOURCE LINE # 198
0012 22                RET     
             ; FUNCTION UART_init (END)

             ; FUNCTION L?0101 (BEGIN)
0000         L?0102:
0000 2E                ADD     A,R6
0001 F8                MOV     R0,A
0002 E6                MOV     A,@R0
0003 FF                MOV     R7,A
             ; FUNCTION _UARTSnd (BEGIN)
                                           ; SOURCE LINE # 200
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 16  

;---- Variable 'dat' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 201
                                           ; SOURCE LINE # 203
0004 C299              CLR     TI
                                           ; SOURCE LINE # 204
0006 8F99              MOV     SBUF,R7
0008         ?C0026:
                                           ; SOURCE LINE # 205
0008 3099FD            JNB     TI,?C0026
                                           ; SOURCE LINE # 207
000B 22                RET     
             ; FUNCTION _UARTSnd (END)

             ; FUNCTION MeterByTrig (BEGIN)
                                           ; SOURCE LINE # 230
                                           ; SOURCE LINE # 231
                                           ; SOURCE LINE # 236
0000 5389F1            ANL     TMOD,#0F1H
                                           ; SOURCE LINE # 239
0003 E4                CLR     A
0004 F58C              MOV     TH0,A
                                           ; SOURCE LINE # 240
0006 F58A              MOV     TL0,A
                                           ; SOURCE LINE # 243
0008 C2A1              CLR     Trig_Pin
                                           ; SOURCE LINE # 244
000A D2A1              SETB    Trig_Pin
                                           ; SOURCE LINE # 245
000C 00                NOP     
                                           ; SOURCE LINE # 246
;---- Variable 'tempi' assigned to Register 'R7' ----
000D 7F19              MOV     R7,#019H
000F         ?C0029:
                                           ; SOURCE LINE # 247
000F DFFE              DJNZ    R7,?C0029
                                           ; SOURCE LINE # 249
0011 C2A1              CLR     Trig_Pin
0013         ?C0031:
                                           ; SOURCE LINE # 251
0013 30A0FD            JNB     Echo_Pin,?C0031
                                           ; SOURCE LINE # 253
0016 D28C              SETB    TR0
0018         ?C0033:
                                           ; SOURCE LINE # 254
0018 20A0FD            JB      Echo_Pin,?C0033
                                           ; SOURCE LINE # 256
001B C28C              CLR     TR0
                                           ; SOURCE LINE # 258
001D AF8C              MOV     R7,TH0
001F E4                CLR     A
0020 8F00        R     MOV     PresentTime+03H,R7
0022 F500        R     MOV     PresentTime+02H,A
0024 F500        R     MOV     PresentTime+01H,A
0026 F500        R     MOV     PresentTime,A
                                           ; SOURCE LINE # 259
0028 AE00        R     MOV     R6,PresentTime+02H
002A AD00        R     MOV     R5,PresentTime+01H
002C AC00        R     MOV     R4,PresentTime
002E 7808              MOV     R0,#08H
0030 120000      E     LCALL   ?C?LSHL
0033 8F00        R     MOV     PresentTime+03H,R7
0035 8E00        R     MOV     PresentTime+02H,R6
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 17  

0037 8D00        R     MOV     PresentTime+01H,R5
0039 8C00        R     MOV     PresentTime,R4
                                           ; SOURCE LINE # 260
003B AF8A              MOV     R7,TL0
003D E4                CLR     A
003E FC                MOV     R4,A
003F FD                MOV     R5,A
0040 FE                MOV     R6,A
0041 E500        R     MOV     A,PresentTime+03H
0043 2F                ADD     A,R7
0044 F500        R     MOV     PresentTime+03H,A
0046 EE                MOV     A,R6
0047 3500        R     ADDC    A,PresentTime+02H
0049 F500        R     MOV     PresentTime+02H,A
004B ED                MOV     A,R5
004C 3500        R     ADDC    A,PresentTime+01H
004E F500        R     MOV     PresentTime+01H,A
0050 EC                MOV     A,R4
0051 3500        R     ADDC    A,PresentTime
0053 F500        R     MOV     PresentTime,A
                                           ; SOURCE LINE # 265
0055 AF00        R     MOV     R7,PresentTime+03H
0057 AE00        R     MOV     R6,PresentTime+02H
0059 AD00        R     MOV     R5,PresentTime+01H
005B FC                MOV     R4,A
005C E4                CLR     A
005D 120000      E     LCALL   ?C?FCASTL
0060 7B99              MOV     R3,#099H
0062 7ABB              MOV     R2,#0BBH
0064 7996              MOV     R1,#096H
0066 783C              MOV     R0,#03CH
0068 120000      E     LCALL   ?C?FPMUL
006B 120000      E     LCALL   ?C?CASTF
006E 8F00        R     MOV     PresentTime+03H,R7
0070 8E00        R     MOV     PresentTime+02H,R6
0072 8D00        R     MOV     PresentTime+01H,R5
0074 8C00        R     MOV     PresentTime,R4
                                           ; SOURCE LINE # 269
                                           ; SOURCE LINE # 270
0076 22                RET     
             ; FUNCTION MeterByTrig (END)

             ; FUNCTION _DisplayLength (BEGIN)
                                           ; SOURCE LINE # 352
0000 8F00        R     MOV     number+03H,R7
0002 8E00        R     MOV     number+02H,R6
0004 8D00        R     MOV     number+01H,R5
0006 8C00        R     MOV     number,R4
                                           ; SOURCE LINE # 353
                                           ; SOURCE LINE # 355
0008 E4                CLR     A
0009 7FE7              MOV     R7,#0E7H
000B 7E03              MOV     R6,#03H
000D FD                MOV     R5,A
000E FC                MOV     R4,A
000F AB00        R     MOV     R3,number+03H
0011 AA00        R     MOV     R2,number+02H
0013 A900        R     MOV     R1,number+01H
0015 A800        R     MOV     R0,number
0017 D3                SETB    C
0018 120000      E     LCALL   ?C?ULCMP
001B 4009              JC      ?C0036
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 18  

                                           ; SOURCE LINE # 356
001D E4                CLR     A
001E F500        R     MOV     number+03H,A
0020 F500        R     MOV     number+02H,A
0022 F500        R     MOV     number+01H,A
0024 F500        R     MOV     number,A
0026         ?C0036:
                                           ; SOURCE LINE # 360
0026 E4                CLR     A
0027 7B64              MOV     R3,#064H
0029 FA                MOV     R2,A
002A F9                MOV     R1,A
002B F8                MOV     R0,A
002C AF00        R     MOV     R7,number+03H
002E AE00        R     MOV     R6,number+02H
0030 AD00        R     MOV     R5,number+01H
0032 AC00        R     MOV     R4,number
0034 120000      E     LCALL   ?C?ULDIV
0037 8F00        R     MOV     Hundred,R7
                                           ; SOURCE LINE # 362
0039 AF00        R     MOV     R7,number+03H
003B AE00        R     MOV     R6,number+02H
003D AD00        R     MOV     R5,number+01H
003F AC00        R     MOV     R4,number
0041 E4                CLR     A
0042 7B64              MOV     R3,#064H
0044 FA                MOV     R2,A
0045 F9                MOV     R1,A
0046 F8                MOV     R0,A
0047 120000      E     LCALL   ?C?ULDIV
004A AC00              MOV     R4,AR0
004C AD01              MOV     R5,AR1
004E AE02              MOV     R6,AR2
0050 AF03              MOV     R7,AR3
0052 8F00        R     MOV     number+03H,R7
0054 8E00        R     MOV     number+02H,R6
0056 8D00        R     MOV     number+01H,R5
0058 8C00        R     MOV     number,R4
                                           ; SOURCE LINE # 363
005A E4                CLR     A
005B 7B0A              MOV     R3,#0AH
005D FA                MOV     R2,A
005E F9                MOV     R1,A
005F F8                MOV     R0,A
0060 120000      E     LCALL   ?C?ULDIV
0063 8F00        R     MOV     Decade,R7
                                           ; SOURCE LINE # 365
0065 E4                CLR     A
0066 7B0A              MOV     R3,#0AH
0068 FA                MOV     R2,A
0069 F9                MOV     R1,A
006A F8                MOV     R0,A
006B AF00        R     MOV     R7,number+03H
006D AE00        R     MOV     R6,number+02H
006F AD00        R     MOV     R5,number+01H
0071 AC00        R     MOV     R4,number
0073 120000      E     LCALL   ?C?ULDIV
;---- Variable 'Unit' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 367
0076 E500        R     MOV     A,Decade
0078 FD                MOV     R5,A
0079 7C00              MOV     R4,#00H
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 19  

007B 7A00              MOV     R2,#00H
007D AF00        R     MOV     R7,Hundred
007F 020000      R     LJMP    _fin_display
             ; FUNCTION _DisplayLength (END)

             ; FUNCTION L?0100 (BEGIN)
0000 7D00              MOV     R5,#00H
0002 7BFF              MOV     R3,#0FFH
0004 7E00              MOV     R6,#00H
0006 120000      E     LCALL   ?C?COPY
             ; FUNCTION Delay20ms (BEGIN)
                                           ; SOURCE LINE # 422
                                           ; SOURCE LINE # 423
                                           ; SOURCE LINE # 426
;---- Variable 'i' assigned to Register 'R7' ----
0009 7F24              MOV     R7,#024H
                                           ; SOURCE LINE # 427
;---- Variable 'j' assigned to Register 'R6' ----
000B 7ED9              MOV     R6,#0D9H
                                           ; SOURCE LINE # 429
000D         ?C0041:
                                           ; SOURCE LINE # 430
000D DEFE              DJNZ    R6,?C0041
                                           ; SOURCE LINE # 432
000F DFFC              DJNZ    R7,?C0041
                                           ; SOURCE LINE # 433
0011 22                RET     
             ; FUNCTION Delay20ms (END)

             ; FUNCTION Delay5s (BEGIN)
                                           ; SOURCE LINE # 435
                                           ; SOURCE LINE # 436
                                           ; SOURCE LINE # 439
0000 00                NOP     
                                           ; SOURCE LINE # 440
;---- Variable 'i' assigned to Register 'R7' ----
0001 7F24              MOV     R7,#024H
                                           ; SOURCE LINE # 441
;---- Variable 'j' assigned to Register 'R6' ----
0003 7E05              MOV     R6,#05H
                                           ; SOURCE LINE # 442
;---- Variable 'k' assigned to Register 'R5' ----
0005 7DD3              MOV     R5,#0D3H
                                           ; SOURCE LINE # 444
                                           ; SOURCE LINE # 446
0007         ?C0050:
                                           ; SOURCE LINE # 447
0007 DDFE              DJNZ    R5,?C0050
                                           ; SOURCE LINE # 449
0009 DEFC              DJNZ    R6,?C0050
                                           ; SOURCE LINE # 450
000B DFFA              DJNZ    R7,?C0050
                                           ; SOURCE LINE # 451
000D 22                RET     
             ; FUNCTION Delay5s (END)

             ; FUNCTION Delay1s (BEGIN)
                                           ; SOURCE LINE # 453
                                           ; SOURCE LINE # 454
                                           ; SOURCE LINE # 457
0000 00                NOP     
                                           ; SOURCE LINE # 458
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 20  

;---- Variable 'i' assigned to Register 'R7' ----
0001 7F0B              MOV     R7,#0BH
                                           ; SOURCE LINE # 459
;---- Variable 'j' assigned to Register 'R6' ----
0003 7E82              MOV     R6,#082H
                                           ; SOURCE LINE # 460
;---- Variable 'k' assigned to Register 'R5' ----
0005 7D6F              MOV     R5,#06FH
                                           ; SOURCE LINE # 462
                                           ; SOURCE LINE # 464
0007         ?C0059:
                                           ; SOURCE LINE # 465
0007 DDFE              DJNZ    R5,?C0059
                                           ; SOURCE LINE # 467
0009 DEFC              DJNZ    R6,?C0059
                                           ; SOURCE LINE # 468
000B DFFA              DJNZ    R7,?C0059
                                           ; SOURCE LINE # 469
000D 22                RET     
             ; FUNCTION Delay1s (END)

             ; FUNCTION greater_than_1m (BEGIN)
                                           ; SOURCE LINE # 482
                                           ; SOURCE LINE # 483
                                           ; SOURCE LINE # 485
0000 7800        R     MOV     R0,#LOW greater_than_1m
0002 7C00        R     MOV     R4,#HIGH greater_than_1m
0004 7A00        R     MOV     R2,#HIGH _?ix1000
0006 7900        R     MOV     R1,#LOW _?ix1000
0008 7F14              MOV     R7,#014H
                                           ; SOURCE LINE # 486
000A 120000      R     LCALL   L?0100
                                           ; SOURCE LINE # 487
;---- Variable 'tempj' assigned to Register 'R6' ----
000D E4                CLR     A
000E FE                MOV     R6,A
000F         ?C0062:
000F EE                MOV     A,R6
0010 C3                CLR     C
0011 9414              SUBB    A,#014H
0013 7480              MOV     A,#080H
0015 9480              SUBB    A,#080H
0017 5008              JNC     ?C0063
                                           ; SOURCE LINE # 488
                                           ; SOURCE LINE # 489
0019 7400        R     MOV     A,#LOW greater_than_1m
001B 120000      R     LCALL   L?0101
                                           ; SOURCE LINE # 490
001E 0E                INC     R6
001F 80EE              SJMP    ?C0062
0021         ?C0063:
                                           ; SOURCE LINE # 491
0021 020000      R     LJMP    Delay5s
             ; FUNCTION greater_than_1m (END)

             ; FUNCTION less_than_1m (BEGIN)
                                           ; SOURCE LINE # 494
                                           ; SOURCE LINE # 495
                                           ; SOURCE LINE # 497
0000 7800        R     MOV     R0,#LOW less_than_1m
0002 7C00        R     MOV     R4,#HIGH less_than_1m
0004 7A00        R     MOV     R2,#HIGH _?ix1001
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 21  

0006 7900        R     MOV     R1,#LOW _?ix1001
0008 7F0E              MOV     R7,#0EH
                                           ; SOURCE LINE # 498
000A 120000      R     LCALL   L?0100
                                           ; SOURCE LINE # 499
;---- Variable 'tempj' assigned to Register 'R6' ----
000D E4                CLR     A
000E FE                MOV     R6,A
000F         ?C0066:
000F EE                MOV     A,R6
0010 C3                CLR     C
0011 940E              SUBB    A,#0EH
0013 7480              MOV     A,#080H
0015 9480              SUBB    A,#080H
0017 5008              JNC     ?C0067
                                           ; SOURCE LINE # 500
                                           ; SOURCE LINE # 501
0019 7400        R     MOV     A,#LOW less_than_1m
001B 120000      R     LCALL   L?0101
                                           ; SOURCE LINE # 502
001E 0E                INC     R6
001F 80EE              SJMP    ?C0066
0021         ?C0067:
                                           ; SOURCE LINE # 503
0021 020000      R     LJMP    Delay1s
             ; FUNCTION less_than_1m (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 506
                                           ; SOURCE LINE # 507
                                           ; SOURCE LINE # 512
0000 7800        R     MOV     R0,#LOW greater_than_2m
0002 7C00        R     MOV     R4,#HIGH greater_than_2m
0004 7D00              MOV     R5,#00H
0006 7BFF              MOV     R3,#0FFH
0008 7A00        R     MOV     R2,#HIGH _?ix1002
000A 7900        R     MOV     R1,#LOW _?ix1002
000C 7E00              MOV     R6,#00H
000E 7F14              MOV     R7,#014H
0010 120000      E     LCALL   ?C?COPY
                                           ; SOURCE LINE # 514
0013 120000      R     LCALL   lcd_init
                                           ; SOURCE LINE # 515
0016 120000      R     LCALL   UART_init
0019         ?C0070:
                                           ; SOURCE LINE # 539
                                           ; SOURCE LINE # 540
                                           ; SOURCE LINE # 541
0019 120000      R     LCALL   MeterByTrig
001C 8F00        R     MOV     PreLength+03H,R7
001E 8E00        R     MOV     PreLength+02H,R6
0020 8D00        R     MOV     PreLength+01H,R5
0022 8C00        R     MOV     PreLength,R4
                                           ; SOURCE LINE # 542
0024 120000      R     LCALL   _DisplayLength
                                           ; SOURCE LINE # 568
0027 20913F            JB      Mode_1,?C0072
                                           ; SOURCE LINE # 569
                                           ; SOURCE LINE # 570
002A E4                CLR     A
002B 7FC8              MOV     R7,#0C8H
002D FE                MOV     R6,A
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 22  

002E FD                MOV     R5,A
002F FC                MOV     R4,A
0030 AB00        R     MOV     R3,PreLength+03H
0032 AA00        R     MOV     R2,PreLength+02H
0034 A900        R     MOV     R1,PreLength+01H
0036 A800        R     MOV     R0,PreLength
0038 D3                SETB    C
0039 120000      E     LCALL   ?C?ULCMP
003C 40DB              JC      ?C0070
                                           ; SOURCE LINE # 571
                                           ; SOURCE LINE # 572
;---- Variable 'i' assigned to Register 'R5' ----
003E E4                CLR     A
003F FD                MOV     R5,A
0040         ?C0074:
0040 ED                MOV     A,R5
0041 C3                CLR     C
0042 9401              SUBB    A,#01H
0044 7480              MOV     A,#080H
0046 9480              SUBB    A,#080H
0048 501A              JNC     ?C0075
                                           ; SOURCE LINE # 573
                                           ; SOURCE LINE # 574
004A 120000      R     LCALL   Delay20ms
                                           ; SOURCE LINE # 575
;---- Variable 'tempj' assigned to Register 'R6' ----
004D E4                CLR     A
004E FE                MOV     R6,A
004F         ?C0077:
004F EE                MOV     A,R6
0050 C3                CLR     C
0051 9414              SUBB    A,#014H
0053 7480              MOV     A,#080H
0055 9480              SUBB    A,#080H
0057 5008              JNC     ?C0076
                                           ; SOURCE LINE # 576
                                           ; SOURCE LINE # 577
0059 7400        R     MOV     A,#LOW greater_than_2m
005B 120000      R     LCALL   L?0102
                                           ; SOURCE LINE # 578
005E 0E                INC     R6
005F 80EE              SJMP    ?C0077
                                           ; SOURCE LINE # 579
0061         ?C0076:
0061 0D                INC     R5
0062 80DC              SJMP    ?C0074
0064         ?C0075:
                                           ; SOURCE LINE # 580
0064 120000      R     LCALL   Delay5s
                                           ; SOURCE LINE # 581
                                           ; SOURCE LINE # 582
0067 80B0              SJMP    ?C0070
0069         ?C0072:
                                           ; SOURCE LINE # 583
0069 209227            JB      Mode_2,?C0081
                                           ; SOURCE LINE # 584
                                           ; SOURCE LINE # 585
006C E4                CLR     A
006D 7FC8              MOV     R7,#0C8H
006F FE                MOV     R6,A
0070 FD                MOV     R5,A
0071 FC                MOV     R4,A
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 23  

0072 AB00        R     MOV     R3,PreLength+03H
0074 AA00        R     MOV     R2,PreLength+02H
0076 A900        R     MOV     R1,PreLength+01H
0078 A800        R     MOV     R0,PreLength
007A D3                SETB    C
007B 120000      E     LCALL   ?C?ULCMP
007E 5099              JNC     ?C0070
0080 E4                CLR     A
0081 7F64              MOV     R7,#064H
0083 FE                MOV     R6,A
0084 FD                MOV     R5,A
0085 FC                MOV     R4,A
0086 A800        R     MOV     R0,PreLength
0088 C3                CLR     C
0089 120000      E     LCALL   ?C?ULCMP
008C 408B              JC      ?C0070
                                           ; SOURCE LINE # 586
                                           ; SOURCE LINE # 587
008E 120000      R     LCALL   greater_than_1m
                                           ; SOURCE LINE # 588
                                           ; SOURCE LINE # 589
0091 8086              SJMP    ?C0070
0093         ?C0081:
                                           ; SOURCE LINE # 590
0093 209383            JB      Mode_3,?C0070
                                           ; SOURCE LINE # 591
                                           ; SOURCE LINE # 592
0096 E4                CLR     A
0097 7F64              MOV     R7,#064H
0099 FE                MOV     R6,A
009A FD                MOV     R5,A
009B FC                MOV     R4,A
009C AB00        R     MOV     R3,PreLength+03H
009E AA00        R     MOV     R2,PreLength+02H
00A0 A900        R     MOV     R1,PreLength+01H
00A2 A800        R     MOV     R0,PreLength
00A4 D3                SETB    C
00A5 120000      E     LCALL   ?C?ULCMP
00A8 4003              JC      $ + 5H
00AA 020000      R     LJMP    ?C0070
                                           ; SOURCE LINE # 593
                                           ; SOURCE LINE # 594
00AD 120000      R     LCALL   less_than_1m
                                           ; SOURCE LINE # 595
                                           ; SOURCE LINE # 596
                                           ; SOURCE LINE # 606
00B0 020000      R     LJMP    ?C0070
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    833    ----
   CONSTANT SIZE    =     54    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      70
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
C51 COMPILER V9.59.0.0   MAIN                                                              08/24/2020 21:52:14 PAGE 24  

   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
