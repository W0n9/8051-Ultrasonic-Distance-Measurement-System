C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\out\Keil_C51\main.o
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.exe .\SRC\MAIN.C CODE PRINT(.\out\Keil_C51\main.lst) OMF2 TABS(2) OPTIMIZE(8
                    -,SPEED) SMALL ROM(LARGE) INCDIR(.\dependence;.\src) DEFINE(__UVISION_VERSION) OBJECT(.\out\Keil_C51\main.o)

line level    source

   1          /**
   2           * *********************************************
   3           * 
   4           * 8051 Ultrasonic Distance Measurement System
   5           * 
   6           * Encoding = GBK
   7           * 
   8           * *********************************************
   9          */
  10          
  11          #include "REG52.H"
  12          #include "intrins.h"
  13          // #include "lcd1602.h"
  14          
  15          typedef unsigned char uint8_t;
  16          typedef unsigned int uint16_t;
  17          typedef unsigned long uint32_t;
  18          
  19          typedef signed char int8_t;
  20          typedef signed int int16_t;
  21          typedef signed long int32_t;
  22          
  23          #define XTAL11M
  24          // #define XTAL12M
  25          
  26          #define EXT0_VECTOR 0  /* 0x03 external interrupt 0 */
  27          #define TIM0_VECTOR 1  /* 0x0b timer 0 */
  28          #define EXT1_VECTOR 2  /* 0x13 external interrupt 1 */
  29          #define TIM1_VECTOR 3  /* 0x1b timer 1 */
  30          #define UART0_VECTOR 4 /* 0x23 serial port 0 */
  31          
  32          // sbit RCK_STMM = P2 ^ 7;
  33          // sbit DIO_DS = P2 ^ 6;
  34          // sbit SCK_SHBit = P2 ^ 5;
  35          
  36          sbit Trig_Pin = P2 ^ 1;
  37          sbit Echo_Pin = P2 ^ 0;
  38          sbit Mode_1 = P1 ^ 1;
  39          sbit Mode_2 = P1 ^ 2;
  40          sbit Mode_3 = P1 ^ 3;
  41          
  42          sbit lcden = P3 ^ 4; //使能端:en=1,读取；en=下降沿，执行指令
  43          sbit lcdrs = P3 ^ 5; //数据/指令选择端：rs=1，为数据；rs=0，为指令。
  44          sbit lcdrw = P3 ^ 6; //读写控制端：rw=1,读；rw=0,写
  45          // int W1,W2,W3,W4,W5,W6,W7;
  46          
  47          /***********延时函数******************/
  48          void delayms(uint16_t time)
  49          {
  50   1          uint16_t i;
  51   1          for (; time > 0; time--)
  52   1          {
  53   2              for (i = 0; i < 124; i++)
  54   2              {
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 2   

  55   3                  ;
  56   3              }
  57   2          }
  58   1      }
  59          
  60          /*******************lcd写入指令子函数********************/
  61          void lcd_wcom(uint8_t com)
  62          {
  63   1          lcdrs = 0;  // rs=0,指令
  64   1          lcdrw = 0;  // rw=0,写入
  65   1          P0 = com;   // 把指令送入P0口
  66   1          delayms(5); //延时一小会 ，让1602准备接收数据--------代替忙检测函数
  67   1          lcden = 1;  //使能端 下降沿，把指令送入1602的8为数据口
  68   1          delayms(2);
  69   1          lcden = 0;
  70   1      }
  71          
  72          /************************lcd写入数据函数************************/
  73          void lcd_wdata(uint8_t dat)
  74          {
  75   1          lcdrs = 1;  // RS=1,数据
  76   1          lcdrw = 0;  // rw=0,写入
  77   1          P0 = dat;   // 把要显示的数据送入P0口
  78   1          delayms(5); //延时一小会 ，让1602准备接收数据--------代替忙检测函数
  79   1          lcden = 1;  //使能端 下降沿，把指令送入1602的8为数据口
  80   1          delayms(2);
  81   1          lcden = 0;
  82   1      }
  83          
  84          /******************LCD初始化子函数****************************/
  85          void lcd_init() //初始化，写入指令
  86          {
  87   1          lcdrw = 0; //rw=0,写
  88   1          lcden = 1;
  89   1          lcden = 0;      //下降沿，执行指令
  90   1          lcd_wcom(0x38); //写指令,8位数据，双列
  91   1          lcd_wcom(0x0c); //开启显示屏，关光标，光标不闪烁
  92   1          lcd_wcom(0x06); //显示地址递增，即写一个数据后，显示位置右移一位
  93   1          lcd_wcom(0x01); //清屏
  94   1      }
  95          
  96          /**********************LCD显示子函数****************************/
  97          //i设置字符位置，j是显示的数字
  98          void lcd_display(uint16_t i, uint16_t j)
  99          {
 100   1      
 101   1          lcd_wcom(0x80 + i - 1);
 102   1          switch (j)
 103   1          {
 104   2          case 0:
 105   2              lcd_wdata('0');
 106   2              delayms(2);
 107   2              break;
 108   2          case 1:
 109   2              lcd_wdata('1');
 110   2              delayms(2);
 111   2              break;
 112   2          case 2:
 113   2              lcd_wdata('2');
 114   2              delayms(2);
 115   2              break;
 116   2          case 3:
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 3   

 117   2              lcd_wdata('3');
 118   2              delayms(2);
 119   2              break;
 120   2          case 4:
 121   2              lcd_wdata('4');
 122   2              delayms(2);
 123   2              break;
 124   2          case 5:
 125   2              lcd_wdata('5');
 126   2              delayms(2);
 127   2              break;
 128   2          case 6:
 129   2              lcd_wdata('6');
 130   2              delayms(2);
 131   2              break;
 132   2          case 7:
 133   2              lcd_wdata('7');
 134   2              delayms(2);
 135   2              break;
 136   2          case 8:
 137   2              lcd_wdata('8');
 138   2              delayms(2);
 139   2              break;
 140   2          case 9:
 141   2              lcd_wdata('9');
 142   2              delayms(2);
 143   2              break;
 144   2          default:
 145   2              lcd_wdata('.');
 146   2              delayms(2);
 147   2              break;
 148   2          }
 149   1      }
 150          /*********************最终显示函数*************************************/
 151          //abc分别为百十个位，使用前需lcd_init()初始化
 152          void fin_display(uint16_t a, b, c)
 153          {
 154   1          lcd_display(5, 5);
 155   1          lcd_display(4, '.');
 156   1          lcd_display(3, c);
 157   1          lcd_display(2, b);
 158   1          lcd_display(1, a);
 159   1      }
 160          /**************************主函数*******************************/
 161          // void main()
 162          // {
 163          //  lcd_init();//初始化
 164          //  while(1)
 165          //     {
 166          //  //lcd_display(10,W1);
 167          //  //lcd_display(9,':');
 168          //  // lcd_display(8,1);
 169          //  // lcd_display(7,W3);
 170          //    // lcd_display(6,':');
 171          //    // lcd_display(5,W4);
 172          //    // lcd_display(4,W5);
 173          //    lcd_display(10,3);
 174          //  lcd_display(2,2);
 175          //     lcd_display(1,1);
 176          //  }
 177          // }
 178          
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 4   

 179          void UART_init() //非同步鬏
 180          {
 181   1          SCON = 0x52; //串列控制捍嫫01010010 TI=1 REN=1 01 8位元UART鬏(8-11)
 182   1          TMOD = 0x20; //r的Ｊ捍嫫 00100000    O定定r器1楣ぷ鞣绞2
 183   1          TCON = 0x69; //r悼刂捍嫫 01101001
 184   1          TH1 = 0xFD;  //r捍嫫  <230> U率1200
 185   1          TR1 = 1;     //r悼刂捍嫫餮e面的TR1  //O置波特率 9600bps
 186   1          ES = 1;      //串列中嘀履
 187   1          EA = 1;      //全部中嘣粗履
 188   1      }
 189          
 190          void UARTSnd(uint8_t dat)
 191          {
 192   1      
 193   1          TI = 0;     // clear transmit interrupt flag
 194   1          SBUF = dat; // start sending one byte
 195   1          while (!TI)
 196   1              ; // wait until sent
 197   1      }
 198          
 199          // void Delay10us() //@11.0592MHz
 200          // {
 201          //     uint8_t tempi;
 202          
 203          //     _nop_();
 204          //     tempi = 25;
 205          //     while (--tempi)
 206          //         ;
 207          // }
 208          
 209          // void Timer0Init(void) //10毫秒@11.0592MHz
 210          // {
 211          //     // AUXR &= 0x7F; //定时器时钟12T模式
 212          //     TMOD &= 0xF0; //设置定时器0模式
 213          //     TL0 = 0x00;   //设置定时初值
 214          //     TH0 = 0xDC;   //设置定时初值
 215          //     TF0 = 0;      //清除TF0标志
 216          //     TR0 = 1;      //定时器0开始计时
 217          // }
 218          
 219          #ifdef XTAL11M
 220          uint32_t MeterByTrig()
 221          {
 222   1          uint8_t tempa;
 223   1          uint8_t tempi;
 224   1          // uint8_t IsOverFlow;
 225   1          uint32_t PresentTime, tempb;
 226   1          // IsOverFlow = 0;
 227   1      
 228   1          //Delay1Ms();
 229   1      
 230   1          // P1M1 &= 0X7F;
 231   1          // P1M2 &= 0X7F;
 232   1      
 233   1          // P1M1 |= 0X40;
 234   1          // P1M2 &= 0XBF;
 235   1      
 236   1          //Timer Init
 237   1          TMOD &= 0xF1;
 238   1          // TAMOD = 0X00;
 239   1          // TCON = 0X00;
 240   1          TH0 = 0;
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 5   

 241   1          TL0 = 0;
 242   1      
 243   1          // Module Start
 244   1          Trig_Pin = 0;
 245   1          Trig_Pin = 1;
 246   1          _nop_();
 247   1          tempi = 25;
 248   1          while (--tempi)
 249   1              ;
 250   1          Trig_Pin = 0;
 251   1      
 252   1          // while (1)
 253   1          // {
 254   1          //     if (Echo_Pin == 1)
 255   1          //     {            //Start Timer;
 256   1          //         TR0 = 1; //start timer
 257   1          //         break;
 258   1          //     }
 259   1          //     if (TF0 == 1)
 260   1          //     {
 261   1          //         IsOverFlow = 1;
 262   1          //         break; //overflow;
 263   1          //     }
 264   1          // }
 265   1      
 266   1          // while (1)
 267   1          // {
 268   1          //     if (Echo_Pin == 0)
 269   1          //     { //Stop Timer;
 270   1          //         TR0 = 0;
 271   1          //         break;
 272   1          //     }
 273   1          //     if (TF0 == 1)
 274   1          //     {
 275   1          //         IsOverFlow = 1;
 276   1          //         break; //overflow;
 277   1          //     }
 278   1          // }
 279   1      
 280   1          while (!Echo_Pin)
 281   1              ;
 282   1          TR0 = 1;
 283   1          while (Echo_Pin)
 284   1              ;
 285   1          TR0 = 0;
 286   1      
 287   1          //  uint32_t PresentTime, tempb;
 288   1          PresentTime = TH0;
 289   1          PresentTime <<= 8;
 290   1          PresentTime += TL0;
 291   1          //921600 Cycles @11.0592MHz
 292   1          // PresentTime /= 921.6;
 293   1          // PresentTime /= 922;
 294   1          // PresentTime *= 17;
 295   1          //  TODO
 296   1          // PresentTime = (uint32_t)(PresentTime * 0.0184);
 297   1          PresentTime = (uint32_t)(PresentTime * 0.0023);
 298   1      
 299   1          // tempb = PresentTime / 137;
 300   1          // PresentTime /= 7; //*3
 301   1      
 302   1          // PresentTime -= tempb; //time, us
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 6   

 303   1      
 304   1          // tempb = PresentTime / 150;
 305   1          // PresentTime /= 3;
 306   1          // PresentTime += tempb;
 307   1          //Delay1Ms();
 308   1          return PresentTime;
 309   1      }
*** WARNING C280 IN LINE 222 OF .\SRC\MAIN.C: 'tempa': unreferenced local variable
*** WARNING C280 IN LINE 225 OF .\SRC\MAIN.C: 'tempb': unreferenced local variable
 310          #endif
 311          
 312          #ifdef XTAL12M
              uint32_t MeterByTrig()
              {
                  uint8_t tempa;
                  uint8_t IsOverFlow;
                  uint32_t PresentTime;
                  IsOverFlow = 0;
              
                  //Delay1Ms();
              
                  // P1M1 &= 0X7F;
                  // P1M2 &= 0X7F;
              
                  // P1M1 |= 0X40;
                  // P1M2 &= 0XBF;
              
                  //Timer Init
                  TMOD &= 0xF5;
                  // TAMOD = 0X00;
                  TCON = 0X00;
                  TH1 = 0;
                  TL1 = 0;
              
                  Trig_Pin = 0;
                  for (tempa = 0; tempa < 10; tempa++) //up for 10us
                  {
                      Trig_Pin = 1;
                  }
                  Trig_Pin = 0;
              
                  while (1)
                  {
                      if (Echo_Pin == 1)
                      {            //Start Timer;
                          TR0 = 1; //start timer
                          break;
                      }
                      if (TF0 == 1)
                      {
                          IsOverFlow = 1;
                          break; //overflow;
                      }
                  }
              
                  while (1)
                  {
                      if (Echo_Pin == 0)
                      { //Stop Timer;
                          TR0 = 0;
                          break;
                      }
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 7   

                      if (TF0 == 1)
                      {
                          IsOverFlow = 1;
                          break; //overflow;
                      }
                  }
              
                  //  uint32_t PresentTime, tempb;
                  PresentTime = TH1;
                  PresentTime <<= 0X08;
                  PresentTime += TL1;
                  //1000000 Cycles @12MHz
                  PresentTime /= 1000;
                  PresentTime *= 17;
              
                  // tempb = PresentTime / 137;
                  // PresentTime /= 7; //*3
              
                  // PresentTime -= tempb; //time, us
              
                  // tempb = PresentTime / 150;
                  // PresentTime /= 3;
                  // PresentTime += tempb;
                  //Delay1Ms();
                  return PresentTime;
              }
              #endif
 390          
 391          void DisplayLength(uint32_t number)
 392          {
 393   1          uint8_t Thousand, Hundred, Decade, Unit;
 394   1          if (number > 999)
 395   1              number = 0;
 396   1          // Thousand = number / 1000;
 397   1      
 398   1          // number = number % 1000;
 399   1          Hundred = number / 100;
 400   1      
 401   1          number = number % 100;
 402   1          Decade = number / 10;
 403   1      
 404   1          Unit = number % 10;
 405   1      
 406   1          fin_display(Hundred, Decade, Unit);
 407   1          // DisplayLED(1, Thousand, 0);
 408   1          // DisplayLED(2, Hundred, 0);
 409   1          // DisplayLED(3, Decade, 0);
 410   1          // DisplayLED(4, Unit, 0);
 411   1      }
*** WARNING C280 IN LINE 393 OF .\SRC\MAIN.C: 'Thousand': unreferenced local variable
 412          
 413          // void DisplayLED(uint8_t LEDid, uint8_t Value, uint8_t Isdot)
 414          // {
 415          //     uint8_t tempa, tempb;
 416          //     uint8_t tempc, tempd;
 417          //     const uint8_t NumValue[11] = {0X40, 0X79, 0X24, 0X30, 0X19, 0X12, 0X02, 0X78, 0X00, 0X10, 0X3F}; //
             -0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -.
 418          
 419          //     tempa = 1;
 420          //     tempa <<= (LEDid - 1);
 421          //     if (Value >= 11) //value should little than 10
 422          //         Value = 0;
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 8   

 423          //     tempb = NumValue[Value];
 424          //     if (Isdot == 0)
 425          //         tempb += 0X80;
 426          
 427          //     //begin output
 428          //     tempd = 0X80;
 429          //     for (tempc = 0; tempc < 8; tempc++)
 430          //     {
 431          //         SCK_SHBit = 0;
 432          //         SCK_SHBit = 0;
 433          //         DIO_DS = (tempa & tempd);
 434          //         SCK_SHBit = 1;
 435          //         SCK_SHBit = 1;
 436          //         tempd >>= 1;
 437          //     }
 438          
 439          //     tempd = 0X80;
 440          //     for (tempc = 0; tempc < 8; tempc++)
 441          //     {
 442          //         SCK_SHBit = 0;
 443          //         SCK_SHBit = 0;
 444          //         DIO_DS = (tempb & tempd);
 445          //         SCK_SHBit = 1;
 446          //         SCK_SHBit = 1;
 447          //         tempd >>= 1;
 448          //     }
 449          
 450          //     RCK_STMM = 0;
 451          //     RCK_STMM = 0;
 452          //     RCK_STMM = 0;
 453          //     RCK_STMM = 0;
 454          //     RCK_STMM = 1;
 455          //     RCK_STMM = 1;
 456          //     RCK_STMM = 1;
 457          //     RCK_STMM = 1;
 458          //     //Delay1Ms();
 459          // }
 460          
 461          void Delay20ms() //@11.0592MHz
 462          {
 463   1          uint8_t i, j;
 464   1      
 465   1          i = 36;
 466   1          j = 217;
 467   1          do
 468   1          {
 469   2              while (--j)
 470   2                  ;
 471   2          } while (--i);
 472   1      }
 473          
 474          void Delay5s() //@11.0592MHz
 475          {
 476   1          uint8_t i, j, k;
 477   1      
 478   1          _nop_();
 479   1          i = 36;
 480   1          j = 5;
 481   1          k = 211;
 482   1          do
 483   1          {
 484   2              do
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 9   

 485   2              {
 486   3                  while (--k)
 487   3                      ;
 488   3              } while (--j);
 489   2          } while (--i);
 490   1      }
 491          
 492          void Delay1s() //@11.0592MHz
 493          {
 494   1          uint8_t i, j, k;
 495   1      
 496   1          _nop_();
 497   1          i = 11;
 498   1          j = 130;
 499   1          k = 111;
 500   1          do
 501   1          {
 502   2              do
 503   2              {
 504   3                  while (--k)
 505   3                      ;
 506   3              } while (--j);
 507   2          } while (--i);
 508   1      }
 509          
 510          // void greater_than_2m()
 511          // {
 512          //     uint8_t tempj;
 513          //     uint8_t greater_than_2m[] = {0xFD, 0x00, 0x11, 0x01, 0x01, 0x73, 0x6F, 0x75, 0x6E, 0x64, 0x6B, 0xB4
             -, 0xF3, 0xD3, 0xDA, 0xC1, 0xBD, 0xC3, 0xD7, 0xC2};
 514          //     Delay20ms();
 515          //     for (tempj = 0; tempj < 20; tempj++)
 516          //     {
 517          //         UARTSnd(greater_than_2m[tempj]);
 518          //     }
 519          // }
 520          
 521          void greater_than_1m()
 522          {
 523   1          uint8_t tempj;
 524   1          uint8_t greater_than_1m[] = {0xFD, 0x00, 0x11, 0x01, 0x01, 0x73, 0x6F, 0x75, 0x6E, 0x64, 0x6B, 0xB4, 0
             -xF3, 0xD3, 0xDA, 0xD2, 0xBB, 0xC3, 0xD7, 0xD7};
 525   1          Delay20ms();
 526   1          for (tempj = 0; tempj < 20; tempj++)
 527   1          {
 528   2              UARTSnd(greater_than_1m[tempj]);
 529   2          }
 530   1          Delay5s();
 531   1      }
 532          
 533          void less_than_1m()
 534          {
 535   1          uint8_t tempj;
 536   1          uint8_t less_than_1m[] = {0xFD, 0x00, 0x0B, 0x01, 0x01, 0xD0, 0xA1, 0xD3, 0xDA, 0xD2, 0xBB, 0xC3, 0xD7
             -, 0xF3};
 537   1          Delay20ms();
 538   1          for (tempj = 0; tempj < 14; tempj++)
 539   1          {
 540   2              UARTSnd(less_than_1m[tempj]);
 541   2          }
 542   1          Delay1s();
 543   1      }
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 10  

 544          
 545          void main()
 546          {
 547   1          uint8_t tempa;
 548   1          uint32_t PreLength; //  Unit is cm
 549   1          uint8_t i;
 550   1          uint8_t tempj;
 551   1          uint8_t greater_than_2m[] = {0xFD, 0x00, 0x11, 0x01, 0x01, 0x73, 0x6F, 0x75, 0x6E, 0x64, 0x6B, 0xB4, 0
             -xF3, 0xD3, 0xDA, 0xC1, 0xBD, 0xC3, 0xD7, 0xC2};
 552   1          uint8_t debug;
 553   1          lcd_init();
 554   1          UART_init();
 555   1      
 556   1          // for (i = 0; i < 1; i++)
 557   1          // { // greater_than_2m();
 558   1      
 559   1          //     Delay20ms();
 560   1          //     for (tempj = 0; tempj < 20; tempj++)
 561   1          //     {
 562   1          //         UARTSnd(greater_than_2m[tempj]);
 563   1          //     }
 564   1          // }
 565   1      
 566   1          // // greater_than_2m();
 567   1          // Delay5s();
 568   1          // for (i = 0; i < 3; i++)
 569   1          // {
 570   1          //     greater_than_1m();
 571   1          // }
 572   1          // // Delay5s();
 573   1          // for (i = 0; i < 3; i++)
 574   1          // {
 575   1          //     less_than_1m();
 576   1          // }
 577   1      
 578   1          while (1)
 579   1          {
 580   2              PreLength = MeterByTrig();
 581   2              DisplayLength(PreLength);
 582   2              // if (PreLength > 200)
 583   2              // {
 584   2              //     for (i = 0; i < 1; i++)
 585   2              //     { // greater_than_2m();
 586   2              //         Delay20ms();
 587   2              //         for (tempj = 0; tempj < 20; tempj++)
 588   2              //         {
 589   2              //             UARTSnd(greater_than_2m[tempj]);
 590   2              //         }
 591   2              //     }
 592   2              // }
 593   2              // else if (PreLength <= 200 && PreLength >= 100)
 594   2              // {
 595   2              //     for (i = 0; i < 3; i++)
 596   2              //     {
 597   2              //         greater_than_1m();
 598   2              //     }
 599   2              // }
 600   2              // else if (PreLength <= 100)
 601   2              // {
 602   2              //     for (i = 0; i < 3; i++)
 603   2              //     {
 604   2              //         less_than_1m();
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 11  

 605   2              //     }
 606   2              // }
 607   2              if (!Mode_1)
 608   2              {
 609   3                  if (PreLength > 200)
 610   3                  {
 611   4                      for (i = 0; i < 1; i++)
 612   4                      { // greater_than_2m();
 613   5                          Delay20ms();
 614   5                          for (tempj = 0; tempj < 20; tempj++)
 615   5                          {
 616   6                              UARTSnd(greater_than_2m[tempj]);
 617   6                          }
 618   5                      }
 619   4                      Delay5s();
 620   4                  }
 621   3              }
 622   2              else if (!Mode_2)
 623   2              {
 624   3                  if (PreLength <= 200 && PreLength >= 100)
 625   3                  {
 626   4                      greater_than_1m();
 627   4                  }
 628   3              }
 629   2              else if (!Mode_3)
 630   2              {
 631   3                  if (PreLength <= 100)
 632   3                  {
 633   4                      less_than_1m();
 634   4                  }
 635   3              }
 636   2      
 637   2              // debug = PreLength / 1000;
 638   2              // UARTSnd(PreLength);
 639   2              // Delay5s();
 640   2      
 641   2              // for (tempa = 0; tempa < 200; tempa++)   //  refresh for 200 cycles
 642   2              // {
 643   2              //     DisplayLength(PreLength);
 644   2              // }
 645   2          }
 646   1      }
*** WARNING C280 IN LINE 547 OF .\SRC\MAIN.C: 'tempa': unreferenced local variable
*** WARNING C280 IN LINE 552 OF .\SRC\MAIN.C: 'debug': unreferenced local variable
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 12  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION L?0101 (BEGIN)
0000 C2B6              CLR     lcdrw
0002 8F80              MOV     P0,R7
0004 7F05              MOV     R7,#05H
0006 7E00              MOV     R6,#00H
0008 120000      R     LCALL   _delayms
000B D2B4              SETB    lcden
000D         L?0102:
000D 7F02              MOV     R7,#02H
000F 7E00              MOV     R6,#00H
             ; FUNCTION _delayms (BEGIN)
                                           ; SOURCE LINE # 48
;---- Variable 'time' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 49
                                           ; SOURCE LINE # 51
0011         ?C0001:
0011 D3                SETB    C
0012 EF                MOV     A,R7
0013 9400              SUBB    A,#00H
0015 EE                MOV     A,R6
0016 9400              SUBB    A,#00H
0018 4015              JC      ?C0007
                                           ; SOURCE LINE # 52
                                           ; SOURCE LINE # 53
;---- Variable 'i' assigned to Register 'R4/R5' ----
001A E4                CLR     A
001B FD                MOV     R5,A
001C FC                MOV     R4,A
001D         ?C0004:
                                           ; SOURCE LINE # 54
                                           ; SOURCE LINE # 56
001D 0D                INC     R5
001E BD0001            CJNE    R5,#00H,?C0087
0021 0C                INC     R4
0022         ?C0087:
0022 ED                MOV     A,R5
0023 647C              XRL     A,#07CH
0025 4C                ORL     A,R4
0026 70F5              JNZ     ?C0004
                                           ; SOURCE LINE # 57
0028         ?C0003:
0028 EF                MOV     A,R7
0029 1F                DEC     R7
002A 70E5              JNZ     ?C0001
002C 1E                DEC     R6
002D         ?C0088:
002D 80E2              SJMP    ?C0001
                                           ; SOURCE LINE # 58
002F         ?C0007:
002F 22                RET     
             ; FUNCTION _delayms (END)

             ; FUNCTION _lcd_wcom (BEGIN)
                                           ; SOURCE LINE # 61
;---- Variable 'com' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 62
                                           ; SOURCE LINE # 63
0000 C2B5              CLR     lcdrs
                                           ; SOURCE LINE # 64
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 13  

                                           ; SOURCE LINE # 65
                                           ; SOURCE LINE # 66
                                           ; SOURCE LINE # 67
                                           ; SOURCE LINE # 68
0002 120000      R     LCALL   L?0101
                                           ; SOURCE LINE # 69
0005 C2B4              CLR     lcden
                                           ; SOURCE LINE # 70
0007 22                RET     
             ; FUNCTION _lcd_wcom (END)

             ; FUNCTION _lcd_wdata (BEGIN)
                                           ; SOURCE LINE # 73
;---- Variable 'dat' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 74
                                           ; SOURCE LINE # 75
0000 D2B5              SETB    lcdrs
                                           ; SOURCE LINE # 76
                                           ; SOURCE LINE # 77
                                           ; SOURCE LINE # 78
                                           ; SOURCE LINE # 79
                                           ; SOURCE LINE # 80
0002 120000      R     LCALL   L?0101
                                           ; SOURCE LINE # 81
0005 C2B4              CLR     lcden
                                           ; SOURCE LINE # 82
0007 22                RET     
             ; FUNCTION _lcd_wdata (END)

             ; FUNCTION lcd_init (BEGIN)
                                           ; SOURCE LINE # 85
                                           ; SOURCE LINE # 86
                                           ; SOURCE LINE # 87
0000 C2B6              CLR     lcdrw
                                           ; SOURCE LINE # 88
0002 D2B4              SETB    lcden
                                           ; SOURCE LINE # 89
0004 C2B4              CLR     lcden
                                           ; SOURCE LINE # 90
0006 7F38              MOV     R7,#038H
0008 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 91
000B 7F0C              MOV     R7,#0CH
000D 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 92
0010 7F06              MOV     R7,#06H
0012 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 93
0015 7F01              MOV     R7,#01H
0017 020000      R     LJMP    _lcd_wcom
             ; FUNCTION lcd_init (END)

             ; FUNCTION _lcd_display (BEGIN)
                                           ; SOURCE LINE # 98
;---- Variable 'j' assigned to Register 'R2/R3' ----
0000 AB05              MOV     R3,AR5
0002 AA04              MOV     R2,AR4
;---- Variable 'i' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 99
                                           ; SOURCE LINE # 101
0004 EF                MOV     A,R7
0005 247F              ADD     A,#07FH
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 14  

0007 FF                MOV     R7,A
0008 120000      R     LCALL   _lcd_wcom
                                           ; SOURCE LINE # 102
000B EA                MOV     A,R2
000C 7053              JNZ     ?C0022
000E EB                MOV     A,R3
000F B40A00            CJNE    A,#0AH,?C0089
0012         ?C0089:
0012 504D              JNC     ?C0022
0014 900000      R     MOV     DPTR,#?C0090
0017 F8                MOV     R0,A
0018 28                ADD     A,R0
0019 28                ADD     A,R0
001A 73                JMP     @A+DPTR
001B         ?C0090:
001B 020000      R     LJMP    ?C0012
001E 020000      R     LJMP    ?C0013
0021 020000      R     LJMP    ?C0014
0024 020000      R     LJMP    ?C0015
0027 020000      R     LJMP    ?C0016
002A 020000      R     LJMP    ?C0017
002D 020000      R     LJMP    ?C0018
0030 020000      R     LJMP    ?C0019
0033 020000      R     LJMP    ?C0020
0036 020000      R     LJMP    ?C0021
                                           ; SOURCE LINE # 103
                                           ; SOURCE LINE # 104
0039         ?C0012:
                                           ; SOURCE LINE # 105
0039 7F30              MOV     R7,#030H
                                           ; SOURCE LINE # 106
                                           ; SOURCE LINE # 107
003B 8026              SJMP    ?C0100
                                           ; SOURCE LINE # 108
003D         ?C0013:
                                           ; SOURCE LINE # 109
003D 7F31              MOV     R7,#031H
003F         ?C0091:
                                           ; SOURCE LINE # 110
                                           ; SOURCE LINE # 111
003F 8022              SJMP    ?C0100
                                           ; SOURCE LINE # 112
0041         ?C0014:
                                           ; SOURCE LINE # 113
0041 7F32              MOV     R7,#032H
0043         ?C0092:
                                           ; SOURCE LINE # 114
                                           ; SOURCE LINE # 115
0043 801E              SJMP    ?C0100
                                           ; SOURCE LINE # 116
0045         ?C0015:
                                           ; SOURCE LINE # 117
0045 7F33              MOV     R7,#033H
0047         ?C0093:
                                           ; SOURCE LINE # 118
                                           ; SOURCE LINE # 119
0047 801A              SJMP    ?C0100
                                           ; SOURCE LINE # 120
0049         ?C0016:
                                           ; SOURCE LINE # 121
0049 7F34              MOV     R7,#034H
004B         ?C0094:
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 15  

                                           ; SOURCE LINE # 122
                                           ; SOURCE LINE # 123
004B 8016              SJMP    ?C0100
                                           ; SOURCE LINE # 124
004D         ?C0017:
                                           ; SOURCE LINE # 125
004D 7F35              MOV     R7,#035H
004F         ?C0095:
                                           ; SOURCE LINE # 126
                                           ; SOURCE LINE # 127
004F 8012              SJMP    ?C0100
                                           ; SOURCE LINE # 128
0051         ?C0018:
                                           ; SOURCE LINE # 129
0051 7F36              MOV     R7,#036H
0053         ?C0096:
                                           ; SOURCE LINE # 130
                                           ; SOURCE LINE # 131
0053 800E              SJMP    ?C0100
                                           ; SOURCE LINE # 132
0055         ?C0019:
                                           ; SOURCE LINE # 133
0055 7F37              MOV     R7,#037H
0057         ?C0097:
                                           ; SOURCE LINE # 134
                                           ; SOURCE LINE # 135
0057 800A              SJMP    ?C0100
                                           ; SOURCE LINE # 136
0059         ?C0020:
                                           ; SOURCE LINE # 137
0059 7F38              MOV     R7,#038H
005B         ?C0098:
                                           ; SOURCE LINE # 138
                                           ; SOURCE LINE # 139
005B 8006              SJMP    ?C0100
                                           ; SOURCE LINE # 140
005D         ?C0021:
                                           ; SOURCE LINE # 141
005D 7F39              MOV     R7,#039H
005F         ?C0099:
                                           ; SOURCE LINE # 142
                                           ; SOURCE LINE # 143
005F 8002              SJMP    ?C0100
                                           ; SOURCE LINE # 144
0061         ?C0022:
                                           ; SOURCE LINE # 145
0061 7F2E              MOV     R7,#02EH
0063         ?C0100:
0063 120000      R     LCALL   _lcd_wdata
                                           ; SOURCE LINE # 146
0066 120000      R     LCALL   L?0102
                                           ; SOURCE LINE # 147
                                           ; SOURCE LINE # 148
                                           ; SOURCE LINE # 149
0069         ?C0023:
0069 22                RET     
             ; FUNCTION _lcd_display (END)

             ; FUNCTION _fin_display (BEGIN)
                                           ; SOURCE LINE # 152
0000 8E00        R     MOV     a,R6
0002 8F00        R     MOV     a+01H,R7
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 16  

0004 8C00        R     MOV     b,R4
0006 8D00        R     MOV     b+01H,R5
0008 8A00        R     MOV     c,R2
000A 8B00        R     MOV     c+01H,R3
                                           ; SOURCE LINE # 153
                                           ; SOURCE LINE # 154
000C 7D05              MOV     R5,#05H
000E 7C00              MOV     R4,#00H
0010 7F05              MOV     R7,#05H
0012 7E00              MOV     R6,#00H
0014 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 155
0017 7D2E              MOV     R5,#02EH
0019 7C00              MOV     R4,#00H
001B 7F04              MOV     R7,#04H
001D 7E00              MOV     R6,#00H
001F 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 156
0022 AD00        R     MOV     R5,c+01H
0024 AC00        R     MOV     R4,c
0026 7F03              MOV     R7,#03H
0028 7E00              MOV     R6,#00H
002A 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 157
002D AD00        R     MOV     R5,b+01H
002F AC00        R     MOV     R4,b
0031 7F02              MOV     R7,#02H
0033 7E00              MOV     R6,#00H
0035 120000      R     LCALL   _lcd_display
                                           ; SOURCE LINE # 158
0038 AD00        R     MOV     R5,a+01H
003A AC00        R     MOV     R4,a
003C 7F01              MOV     R7,#01H
003E 7E00              MOV     R6,#00H
0040 020000      R     LJMP    _lcd_display
             ; FUNCTION _fin_display (END)

             ; FUNCTION UART_init (BEGIN)
                                           ; SOURCE LINE # 179
                                           ; SOURCE LINE # 180
                                           ; SOURCE LINE # 181
0000 759852            MOV     SCON,#052H
                                           ; SOURCE LINE # 182
0003 758920            MOV     TMOD,#020H
                                           ; SOURCE LINE # 183
0006 758869            MOV     TCON,#069H
                                           ; SOURCE LINE # 184
0009 758DFD            MOV     TH1,#0FDH
                                           ; SOURCE LINE # 185
000C D28E              SETB    TR1
                                           ; SOURCE LINE # 186
000E D2AC              SETB    ES
                                           ; SOURCE LINE # 187
0010 D2AF              SETB    EA
                                           ; SOURCE LINE # 188
0012 22                RET     
             ; FUNCTION UART_init (END)

             ; FUNCTION L?0104 (BEGIN)
0000         L?0105:
0000 2E                ADD     A,R6
0001 F8                MOV     R0,A
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 17  

0002 E6                MOV     A,@R0
0003 FF                MOV     R7,A
             ; FUNCTION _UARTSnd (BEGIN)
                                           ; SOURCE LINE # 190
;---- Variable 'dat' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 191
                                           ; SOURCE LINE # 193
0004 C299              CLR     TI
                                           ; SOURCE LINE # 194
0006 8F99              MOV     SBUF,R7
0008         ?C0026:
                                           ; SOURCE LINE # 195
0008 3099FD            JNB     TI,?C0026
                                           ; SOURCE LINE # 197
000B 22                RET     
             ; FUNCTION _UARTSnd (END)

             ; FUNCTION MeterByTrig (BEGIN)
                                           ; SOURCE LINE # 220
                                           ; SOURCE LINE # 221
                                           ; SOURCE LINE # 237
0000 5389F1            ANL     TMOD,#0F1H
                                           ; SOURCE LINE # 240
0003 E4                CLR     A
0004 F58C              MOV     TH0,A
                                           ; SOURCE LINE # 241
0006 F58A              MOV     TL0,A
                                           ; SOURCE LINE # 244
0008 C2A1              CLR     Trig_Pin
                                           ; SOURCE LINE # 245
000A D2A1              SETB    Trig_Pin
                                           ; SOURCE LINE # 246
000C 00                NOP     
                                           ; SOURCE LINE # 247
;---- Variable 'tempi' assigned to Register 'R7' ----
000D 7F19              MOV     R7,#019H
000F         ?C0029:
                                           ; SOURCE LINE # 248
000F DFFE              DJNZ    R7,?C0029
                                           ; SOURCE LINE # 250
0011 C2A1              CLR     Trig_Pin
0013         ?C0031:
                                           ; SOURCE LINE # 280
0013 30A0FD            JNB     Echo_Pin,?C0031
                                           ; SOURCE LINE # 282
0016 D28C              SETB    TR0
0018         ?C0033:
                                           ; SOURCE LINE # 283
0018 20A0FD            JB      Echo_Pin,?C0033
                                           ; SOURCE LINE # 285
001B C28C              CLR     TR0
                                           ; SOURCE LINE # 288
001D AF8C              MOV     R7,TH0
001F E4                CLR     A
0020 8F00        R     MOV     PresentTime+03H,R7
0022 F500        R     MOV     PresentTime+02H,A
0024 F500        R     MOV     PresentTime+01H,A
0026 F500        R     MOV     PresentTime,A
                                           ; SOURCE LINE # 289
0028 AE00        R     MOV     R6,PresentTime+02H
002A AD00        R     MOV     R5,PresentTime+01H
002C AC00        R     MOV     R4,PresentTime
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 18  

002E 7808              MOV     R0,#08H
0030 120000      E     LCALL   ?C?LSHL
0033 8F00        R     MOV     PresentTime+03H,R7
0035 8E00        R     MOV     PresentTime+02H,R6
0037 8D00        R     MOV     PresentTime+01H,R5
0039 8C00        R     MOV     PresentTime,R4
                                           ; SOURCE LINE # 290
003B AF8A              MOV     R7,TL0
003D E4                CLR     A
003E FC                MOV     R4,A
003F FD                MOV     R5,A
0040 FE                MOV     R6,A
0041 E500        R     MOV     A,PresentTime+03H
0043 2F                ADD     A,R7
0044 F500        R     MOV     PresentTime+03H,A
0046 EE                MOV     A,R6
0047 3500        R     ADDC    A,PresentTime+02H
0049 F500        R     MOV     PresentTime+02H,A
004B ED                MOV     A,R5
004C 3500        R     ADDC    A,PresentTime+01H
004E F500        R     MOV     PresentTime+01H,A
0050 EC                MOV     A,R4
0051 3500        R     ADDC    A,PresentTime
0053 F500        R     MOV     PresentTime,A
                                           ; SOURCE LINE # 297
0055 AF00        R     MOV     R7,PresentTime+03H
0057 AE00        R     MOV     R6,PresentTime+02H
0059 AD00        R     MOV     R5,PresentTime+01H
005B FC                MOV     R4,A
005C E4                CLR     A
005D 120000      E     LCALL   ?C?FCASTL
0060 7B99              MOV     R3,#099H
0062 7ABB              MOV     R2,#0BBH
0064 7916              MOV     R1,#016H
0066 783B              MOV     R0,#03BH
0068 120000      E     LCALL   ?C?FPMUL
006B 120000      E     LCALL   ?C?CASTF
006E 8F00        R     MOV     PresentTime+03H,R7
0070 8E00        R     MOV     PresentTime+02H,R6
0072 8D00        R     MOV     PresentTime+01H,R5
0074 8C00        R     MOV     PresentTime,R4
                                           ; SOURCE LINE # 308
                                           ; SOURCE LINE # 309
0076 22                RET     
             ; FUNCTION MeterByTrig (END)

             ; FUNCTION _DisplayLength (BEGIN)
                                           ; SOURCE LINE # 391
0000 8F00        R     MOV     number+03H,R7
0002 8E00        R     MOV     number+02H,R6
0004 8D00        R     MOV     number+01H,R5
0006 8C00        R     MOV     number,R4
                                           ; SOURCE LINE # 392
                                           ; SOURCE LINE # 394
0008 E4                CLR     A
0009 7FE7              MOV     R7,#0E7H
000B 7E03              MOV     R6,#03H
000D FD                MOV     R5,A
000E FC                MOV     R4,A
000F AB00        R     MOV     R3,number+03H
0011 AA00        R     MOV     R2,number+02H
0013 A900        R     MOV     R1,number+01H
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 19  

0015 A800        R     MOV     R0,number
0017 D3                SETB    C
0018 120000      E     LCALL   ?C?ULCMP
001B 4009              JC      ?C0036
                                           ; SOURCE LINE # 395
001D E4                CLR     A
001E F500        R     MOV     number+03H,A
0020 F500        R     MOV     number+02H,A
0022 F500        R     MOV     number+01H,A
0024 F500        R     MOV     number,A
0026         ?C0036:
                                           ; SOURCE LINE # 399
0026 E4                CLR     A
0027 7B64              MOV     R3,#064H
0029 FA                MOV     R2,A
002A F9                MOV     R1,A
002B F8                MOV     R0,A
002C AF00        R     MOV     R7,number+03H
002E AE00        R     MOV     R6,number+02H
0030 AD00        R     MOV     R5,number+01H
0032 AC00        R     MOV     R4,number
0034 120000      E     LCALL   ?C?ULDIV
0037 8F00        R     MOV     Hundred,R7
                                           ; SOURCE LINE # 401
0039 AF00        R     MOV     R7,number+03H
003B AE00        R     MOV     R6,number+02H
003D AD00        R     MOV     R5,number+01H
003F AC00        R     MOV     R4,number
0041 E4                CLR     A
0042 7B64              MOV     R3,#064H
0044 FA                MOV     R2,A
0045 F9                MOV     R1,A
0046 F8                MOV     R0,A
0047 120000      E     LCALL   ?C?ULDIV
004A AC00              MOV     R4,AR0
004C AD01              MOV     R5,AR1
004E AE02              MOV     R6,AR2
0050 AF03              MOV     R7,AR3
0052 8F00        R     MOV     number+03H,R7
0054 8E00        R     MOV     number+02H,R6
0056 8D00        R     MOV     number+01H,R5
0058 8C00        R     MOV     number,R4
                                           ; SOURCE LINE # 402
005A E4                CLR     A
005B 7B0A              MOV     R3,#0AH
005D FA                MOV     R2,A
005E F9                MOV     R1,A
005F F8                MOV     R0,A
0060 120000      E     LCALL   ?C?ULDIV
0063 8F00        R     MOV     Decade,R7
                                           ; SOURCE LINE # 404
0065 E4                CLR     A
0066 7B0A              MOV     R3,#0AH
0068 FA                MOV     R2,A
0069 F9                MOV     R1,A
006A F8                MOV     R0,A
006B AF00        R     MOV     R7,number+03H
006D AE00        R     MOV     R6,number+02H
006F AD00        R     MOV     R5,number+01H
0071 AC00        R     MOV     R4,number
0073 120000      E     LCALL   ?C?ULDIV
;---- Variable 'Unit' assigned to Register 'R3' ----
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 20  

                                           ; SOURCE LINE # 406
0076 AF00        R     MOV     R7,Hundred
0078 7E00              MOV     R6,#00H
007A AD00        R     MOV     R5,Decade
007C 7C00              MOV     R4,#00H
007E 7A00              MOV     R2,#00H
0080 020000      R     LJMP    _fin_display
             ; FUNCTION _DisplayLength (END)

             ; FUNCTION L?0103 (BEGIN)
0000 7D00              MOV     R5,#00H
0002 7BFF              MOV     R3,#0FFH
0004 7E00              MOV     R6,#00H
0006 120000      E     LCALL   ?C?COPY
             ; FUNCTION Delay20ms (BEGIN)
                                           ; SOURCE LINE # 461
                                           ; SOURCE LINE # 462
                                           ; SOURCE LINE # 465
;---- Variable 'i' assigned to Register 'R7' ----
0009 7F24              MOV     R7,#024H
                                           ; SOURCE LINE # 466
;---- Variable 'j' assigned to Register 'R6' ----
000B 7ED9              MOV     R6,#0D9H
                                           ; SOURCE LINE # 468
000D         ?C0041:
                                           ; SOURCE LINE # 469
000D DEFE              DJNZ    R6,?C0041
                                           ; SOURCE LINE # 471
000F DFFC              DJNZ    R7,?C0041
                                           ; SOURCE LINE # 472
0011 22                RET     
             ; FUNCTION Delay20ms (END)

             ; FUNCTION Delay5s (BEGIN)
                                           ; SOURCE LINE # 474
                                           ; SOURCE LINE # 475
                                           ; SOURCE LINE # 478
0000 00                NOP     
                                           ; SOURCE LINE # 479
;---- Variable 'i' assigned to Register 'R7' ----
0001 7F24              MOV     R7,#024H
                                           ; SOURCE LINE # 480
;---- Variable 'j' assigned to Register 'R6' ----
0003 7E05              MOV     R6,#05H
                                           ; SOURCE LINE # 481
;---- Variable 'k' assigned to Register 'R5' ----
0005 7DD3              MOV     R5,#0D3H
                                           ; SOURCE LINE # 483
                                           ; SOURCE LINE # 485
0007         ?C0050:
                                           ; SOURCE LINE # 486
0007 DDFE              DJNZ    R5,?C0050
                                           ; SOURCE LINE # 488
0009 DEFC              DJNZ    R6,?C0050
                                           ; SOURCE LINE # 489
000B DFFA              DJNZ    R7,?C0050
                                           ; SOURCE LINE # 490
000D 22                RET     
             ; FUNCTION Delay5s (END)

             ; FUNCTION Delay1s (BEGIN)
                                           ; SOURCE LINE # 492
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 21  

                                           ; SOURCE LINE # 493
                                           ; SOURCE LINE # 496
0000 00                NOP     
                                           ; SOURCE LINE # 497
;---- Variable 'i' assigned to Register 'R7' ----
0001 7F0B              MOV     R7,#0BH
                                           ; SOURCE LINE # 498
;---- Variable 'j' assigned to Register 'R6' ----
0003 7E82              MOV     R6,#082H
                                           ; SOURCE LINE # 499
;---- Variable 'k' assigned to Register 'R5' ----
0005 7D6F              MOV     R5,#06FH
                                           ; SOURCE LINE # 501
                                           ; SOURCE LINE # 503
0007         ?C0059:
                                           ; SOURCE LINE # 504
0007 DDFE              DJNZ    R5,?C0059
                                           ; SOURCE LINE # 506
0009 DEFC              DJNZ    R6,?C0059
                                           ; SOURCE LINE # 507
000B DFFA              DJNZ    R7,?C0059
                                           ; SOURCE LINE # 508
000D 22                RET     
             ; FUNCTION Delay1s (END)

             ; FUNCTION greater_than_1m (BEGIN)
                                           ; SOURCE LINE # 521
                                           ; SOURCE LINE # 522
                                           ; SOURCE LINE # 524
0000 7800        R     MOV     R0,#LOW greater_than_1m
0002 7C00        R     MOV     R4,#HIGH greater_than_1m
0004 7A00        R     MOV     R2,#HIGH _?ix1000
0006 7900        R     MOV     R1,#LOW _?ix1000
0008 7F14              MOV     R7,#014H
                                           ; SOURCE LINE # 525
000A 120000      R     LCALL   L?0103
                                           ; SOURCE LINE # 526
;---- Variable 'tempj' assigned to Register 'R6' ----
000D E4                CLR     A
000E FE                MOV     R6,A
000F         ?C0062:
000F EE                MOV     A,R6
0010 C3                CLR     C
0011 9414              SUBB    A,#014H
0013 7480              MOV     A,#080H
0015 9480              SUBB    A,#080H
0017 5008              JNC     ?C0063
                                           ; SOURCE LINE # 527
                                           ; SOURCE LINE # 528
0019 7400        R     MOV     A,#LOW greater_than_1m
001B 120000      R     LCALL   L?0104
                                           ; SOURCE LINE # 529
001E 0E                INC     R6
001F 80EE              SJMP    ?C0062
0021         ?C0063:
                                           ; SOURCE LINE # 530
0021 020000      R     LJMP    Delay5s
             ; FUNCTION greater_than_1m (END)

             ; FUNCTION less_than_1m (BEGIN)
                                           ; SOURCE LINE # 533
                                           ; SOURCE LINE # 534
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 22  

                                           ; SOURCE LINE # 536
0000 7800        R     MOV     R0,#LOW less_than_1m
0002 7C00        R     MOV     R4,#HIGH less_than_1m
0004 7A00        R     MOV     R2,#HIGH _?ix1001
0006 7900        R     MOV     R1,#LOW _?ix1001
0008 7F0E              MOV     R7,#0EH
                                           ; SOURCE LINE # 537
000A 120000      R     LCALL   L?0103
                                           ; SOURCE LINE # 538
;---- Variable 'tempj' assigned to Register 'R6' ----
000D E4                CLR     A
000E FE                MOV     R6,A
000F         ?C0066:
000F EE                MOV     A,R6
0010 C3                CLR     C
0011 940E              SUBB    A,#0EH
0013 7480              MOV     A,#080H
0015 9480              SUBB    A,#080H
0017 5008              JNC     ?C0067
                                           ; SOURCE LINE # 539
                                           ; SOURCE LINE # 540
0019 7400        R     MOV     A,#LOW less_than_1m
001B 120000      R     LCALL   L?0104
                                           ; SOURCE LINE # 541
001E 0E                INC     R6
001F 80EE              SJMP    ?C0066
0021         ?C0067:
                                           ; SOURCE LINE # 542
0021 020000      R     LJMP    Delay1s
             ; FUNCTION less_than_1m (END)

             ; FUNCTION main (BEGIN)
                                           ; SOURCE LINE # 545
                                           ; SOURCE LINE # 546
                                           ; SOURCE LINE # 551
0000 7800        R     MOV     R0,#LOW greater_than_2m
0002 7C00        R     MOV     R4,#HIGH greater_than_2m
0004 7D00              MOV     R5,#00H
0006 7BFF              MOV     R3,#0FFH
0008 7A00        R     MOV     R2,#HIGH _?ix1002
000A 7900        R     MOV     R1,#LOW _?ix1002
000C 7E00              MOV     R6,#00H
000E 7F14              MOV     R7,#014H
0010 120000      E     LCALL   ?C?COPY
                                           ; SOURCE LINE # 553
0013 120000      R     LCALL   lcd_init
                                           ; SOURCE LINE # 554
0016 120000      R     LCALL   UART_init
0019         ?C0070:
                                           ; SOURCE LINE # 578
                                           ; SOURCE LINE # 579
                                           ; SOURCE LINE # 580
0019 120000      R     LCALL   MeterByTrig
001C 8F00        R     MOV     PreLength+03H,R7
001E 8E00        R     MOV     PreLength+02H,R6
0020 8D00        R     MOV     PreLength+01H,R5
0022 8C00        R     MOV     PreLength,R4
                                           ; SOURCE LINE # 581
0024 120000      R     LCALL   _DisplayLength
                                           ; SOURCE LINE # 607
0027 20913F            JB      Mode_1,?C0072
                                           ; SOURCE LINE # 608
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 23  

                                           ; SOURCE LINE # 609
002A E4                CLR     A
002B 7FC8              MOV     R7,#0C8H
002D FE                MOV     R6,A
002E FD                MOV     R5,A
002F FC                MOV     R4,A
0030 AB00        R     MOV     R3,PreLength+03H
0032 AA00        R     MOV     R2,PreLength+02H
0034 A900        R     MOV     R1,PreLength+01H
0036 A800        R     MOV     R0,PreLength
0038 D3                SETB    C
0039 120000      E     LCALL   ?C?ULCMP
003C 40DB              JC      ?C0070
                                           ; SOURCE LINE # 610
                                           ; SOURCE LINE # 611
;---- Variable 'i' assigned to Register 'R5' ----
003E E4                CLR     A
003F FD                MOV     R5,A
0040         ?C0074:
0040 ED                MOV     A,R5
0041 C3                CLR     C
0042 9401              SUBB    A,#01H
0044 7480              MOV     A,#080H
0046 9480              SUBB    A,#080H
0048 501A              JNC     ?C0075
                                           ; SOURCE LINE # 612
                                           ; SOURCE LINE # 613
004A 120000      R     LCALL   Delay20ms
                                           ; SOURCE LINE # 614
;---- Variable 'tempj' assigned to Register 'R6' ----
004D E4                CLR     A
004E FE                MOV     R6,A
004F         ?C0077:
004F EE                MOV     A,R6
0050 C3                CLR     C
0051 9414              SUBB    A,#014H
0053 7480              MOV     A,#080H
0055 9480              SUBB    A,#080H
0057 5008              JNC     ?C0076
                                           ; SOURCE LINE # 615
                                           ; SOURCE LINE # 616
0059 7400        R     MOV     A,#LOW greater_than_2m
005B 120000      R     LCALL   L?0105
                                           ; SOURCE LINE # 617
005E 0E                INC     R6
005F 80EE              SJMP    ?C0077
                                           ; SOURCE LINE # 618
0061         ?C0076:
0061 0D                INC     R5
0062 80DC              SJMP    ?C0074
0064         ?C0075:
                                           ; SOURCE LINE # 619
0064 120000      R     LCALL   Delay5s
                                           ; SOURCE LINE # 620
                                           ; SOURCE LINE # 621
0067 80B0              SJMP    ?C0070
0069         ?C0072:
                                           ; SOURCE LINE # 622
0069 209227            JB      Mode_2,?C0081
                                           ; SOURCE LINE # 623
                                           ; SOURCE LINE # 624
006C E4                CLR     A
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 24  

006D 7FC8              MOV     R7,#0C8H
006F FE                MOV     R6,A
0070 FD                MOV     R5,A
0071 FC                MOV     R4,A
0072 AB00        R     MOV     R3,PreLength+03H
0074 AA00        R     MOV     R2,PreLength+02H
0076 A900        R     MOV     R1,PreLength+01H
0078 A800        R     MOV     R0,PreLength
007A D3                SETB    C
007B 120000      E     LCALL   ?C?ULCMP
007E 5099              JNC     ?C0070
0080 E4                CLR     A
0081 7F64              MOV     R7,#064H
0083 FE                MOV     R6,A
0084 FD                MOV     R5,A
0085 FC                MOV     R4,A
0086 A800        R     MOV     R0,PreLength
0088 C3                CLR     C
0089 120000      E     LCALL   ?C?ULCMP
008C 408B              JC      ?C0070
                                           ; SOURCE LINE # 625
                                           ; SOURCE LINE # 626
008E 120000      R     LCALL   greater_than_1m
                                           ; SOURCE LINE # 627
                                           ; SOURCE LINE # 628
0091 8086              SJMP    ?C0070
0093         ?C0081:
                                           ; SOURCE LINE # 629
0093 209383            JB      Mode_3,?C0070
                                           ; SOURCE LINE # 630
                                           ; SOURCE LINE # 631
0096 E4                CLR     A
0097 7F64              MOV     R7,#064H
0099 FE                MOV     R6,A
009A FD                MOV     R5,A
009B FC                MOV     R4,A
009C AB00        R     MOV     R3,PreLength+03H
009E AA00        R     MOV     R2,PreLength+02H
00A0 A900        R     MOV     R1,PreLength+01H
00A2 A800        R     MOV     R0,PreLength
00A4 D3                SETB    C
00A5 120000      E     LCALL   ?C?ULCMP
00A8 4003              JC      $ + 5H
00AA 020000      R     LJMP    ?C0070
                                           ; SOURCE LINE # 632
                                           ; SOURCE LINE # 633
00AD 120000      R     LCALL   less_than_1m
                                           ; SOURCE LINE # 634
                                           ; SOURCE LINE # 635
                                           ; SOURCE LINE # 645
00B0 020000      R     LJMP    ?C0070
             ; FUNCTION main (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    841    ----
   CONSTANT SIZE    =     54    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      82
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.59.0.0   MAIN                                                              08/21/2020 22:48:45 PAGE 25  

   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  5 WARNING(S),  0 ERROR(S)
